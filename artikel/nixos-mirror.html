 <!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>nixos-mirror.sh ‚Äî Mirror Tercepat untuk NixOS</title><link rel="stylesheet" href="/ext/related.css">
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #fdfdfd;
      color: #222;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      transition: background 0.3s, color 0.3s;
    }
    header {
      background: #00695c;
      color: #fff;
      padding: 18px;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 1.3rem;
    }
    main {
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
    }
    h2 { color: #00695c; }
    .note {
      background: #e0f2f1;
      padding: 10px;
      border-left: 4px solid #00695c;
      border-radius: 6px;
      margin-bottom: 16px;
    }
    pre {
      position: relative;
      background: #2d2d2d;
      color: #f8f8f2;
      border-radius: 8px;
      overflow-x: auto;
      margin: 16px 0;
    }
    pre code {
      display: block;
      padding: 16px;
    }
    .copy-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: #00695c;
      color: #fff;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.8rem;
    }
    .download-btn {
      display: inline-block;
      background: #00897b;
      color: #fff;
      text-decoration: none;
      padding: 8px 14px;
      border-radius: 6px;
      font-size: 0.9rem;
      margin-top: 10px;
    }
    .download-btn:hover { background: #004d40; }
    footer {
      text-align: center;
      padding: 10px;
      margin-top: 20px;
      font-size: 0.9rem;
      color: #666;
    }
    /* Dark mode */
    .dark-mode { background: #121212; color: #eaeaea; }
    .dark-mode header { background: #004d40; }
    .dark-mode h2 { color: #80cbc4; }
    .dark-toggle {
      position: fixed;
      top: 12px;
      right: 12px;
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #00695c;
      color: #fff;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <button class="dark-toggle" onclick="toggleDarkMode()">üåô Dark Mode</button>
  <header>
    <h1>‚ö° Skrip nixos-mirror.sh</h1>
    <p>Atur substituter tercepat untuk NixOS</p>
  </header>

  <main>
    <h2>Penjelasan</h2>
    <p>
      NixOS menggunakan <code>nix.conf</code> untuk mengatur substituter (mirror repository).  
      Dengan menambahkan mirror tercepat, kita bisa mempercepat proses <code>nix-env</code> dan <code>nixos-rebuild</code>.  
      Skrip ini otomatis backup konfigurasi lama dan menambahkan substituter baru.
    </p>
    <div class="note">‚ö†Ô∏è Jalankan dengan <code>sudo</code> karena butuh akses tulis ke <code>/etc/nix/nix.conf</code>.</div>

    <h2>Kode Skrip</h2>
    <pre>
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
<code class="language-bash">#!/bin/bash
# nixos-mirror.sh ‚Äî atur substituter mirror tercepat NixOS

set -e

CONF_FILE="/etc/nix/nix.conf"
BACKUP="/etc/nix/nix.conf.backup"

echo "[INFO] Membackup konfigurasi lama ke $BACKUP ..."
sudo cp "$CONF_FILE" "$BACKUP"

echo "[INFO] Menambahkan substituter mirror..."
sudo bash -c 'cat &gt;&gt; /etc/nix/nix.conf &lt;&lt;EOF

# Tambahan substituter mirror cepat
substituters = https://cache.nixos.org https://mirror.sjtu.edu.cn/nix-channels/store
trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= mirror.sjtu.edu.cn-1:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
EOF'

echo "[INFO] Update channel..."
nix-channel --update

echo "[DONE] Substituter NixOS berhasil ditambahkan."</code>
    </pre>

    <a href="data:text/plain;charset=utf-8,#!/bin/bash%0A#%20nixos-mirror.sh%20%E2%80%94%20atur%20substituter%20mirror%20tercepat%20NixOS%0A%0Aset%20-e%0A%0ACONF_FILE=%22/etc/nix/nix.conf%22%0ABACKUP=%22/etc/nix/nix.conf.backup%22%0A%0Aecho%20%22[INFO]%20Membackup%20konfigurasi%20lama%20ke%20$BACKUP%20...%22%0Asudo%20cp%20%22$CONF_FILE%22%20%22$BACKUP%22%0A%0Aecho%20%22[INFO]%20Menambahkan%20substituter%20mirror...%22%0Asudo%20bash%20-c%20'cat%20%3E%3E%20/etc/nix/nix.conf%20%3C%3CEOF%0A%0A#%20Tambahan%20substituter%20mirror%20cepat%0Asubstituters%20=%20https://cache.nixos.org%20https://mirror.sjtu.edu.cn/nix-channels/store%0Atrusted-public-keys%20=%20cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY=%20mirror.sjtu.edu.cn-1:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX%0AEOF'%0A%0Aecho%20%22[INFO]%20Update%20channel...%22%0Anix-channel%20--update%0A%0Aecho%20%22[DONE]%20Substituter%20NixOS%20berhasil%20ditambahkan.%22" download="nixos-mirror.sh" class="download-btn">‚¨áÔ∏è Download nixos-mirror.sh</a>

<!-- Container for FB comments plugin requirement (user script uses id="current-url") -->
          <div style="margin-top:18px;color:var(--muted);font-size:10px"><span id="current-url" class="small-muted"></span></div>
        <!-- Facebook Comments Plugin (user-provided) -->
        <div style="margin-top:18px">
          <!-- Facebook Comments Plugin -->
          <div id="fb-root"></div>
          <script async defer crossorigin="anonymous"
            src="https://connect.facebook.net/id_ID/sdk.js#xfbml=1&version=v23.0">
          </script>
          <div class="fb-comments"
               id="fb-comments"
               data-href=""
               data-width="100%"
               data-numposts="5"></div>
          <script>
            // Ambil URL unik halaman saat ini
            const currentUrl = window.location.href;
            document.getElementById("current-url").textContent = currentUrl;
            // Set data-href FB Comments ke URL halaman ini
            document.getElementById("fb-comments").setAttribute("data-href", currentUrl);
            // Reload plugin FB agar data-href diperbarui (jika SDK sudah siap)
            window.fbAsyncInit = function() {
              if (typeof FB !== 'undefined') {
                try { FB.XFBML.parse(); } catch(e) { /* ignore */ }
              }
            }
          </script>
  </main>
  <footer>
    &copy; 2025 ‚Ä¢ nixos-mirror.sh ‚Äî pastikan public key substituter benar agar paket bisa diverifikasi.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
  <script>
    function copyCode(btn) {
      const code = btn.nextElementSibling.innerText;
      navigator.clipboard.writeText(code).then(() => {
        btn.textContent = "Copied!";
        setTimeout(() => { btn.textContent = "Copy"; }, 1500);
      });
    }
    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
      const btn = document.querySelector(".dark-toggle");
      btn.textContent = document.body.classList.contains("dark-mode") ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";
    }
  </script>
  <!-- Tombol Home Kiri -->
<a href="https://frijal.github.io/sitemap.html" target="_blank" id="btn-home-left" title="Kembali ke Home">
  <!-- Ikon Rumah SVG -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="18" height="18" fill="currentColor" style="margin-right:6px;">
    <path d="M541 229.16l-61-53.6V56a24 24 0 0 0-24-24h-56a24 24 0 0 0-24 24v24.51L314.59 43a35.38 35.38 0 0 0-47.19 0L35 229.16a12 12 0 0 0-1.6 16.9l25.5 28a12 12 0 0 0 16.9 1.6L96 239.64V456a24 24 0 0 0 24 24h112a24 24 0 0 0 24-24V360h64v96a24 24 0 0 0 24 24h112a24 24 0 0 0 24-24V239.64l20.2 17.9a12 12 0 0 0 16.9-1.6l25.5-28a12 12 0 0 0-1.6-16.9z"/>
  </svg>
  Home
</a>

<!-- Tombol Home Kanan -->
<a href="https://frijal.github.io/sitemap.html" target="_blank" id="btn-home-right" title="Kembali ke Home">
  <!-- Ikon Rumah SVG -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="18" height="18" fill="currentColor" style="margin-right:6px;">
    <path d="M541 229.16l-61-53.6V56a24 24 0 0 0-24-24h-56a24 24 0 0 0-24 24v24.51L314.59 43a35.38 35.38 0 0 0-47.19 0L35 229.16a12 12 0 0 0-1.6 16.9l25.5 28a12 12 0 0 0 16.9 1.6L96 239.64V456a24 24 0 0 0 24 24h112a24 24 0 0 0 24-24V360h64v96a24 24 0 0 0 24 24h112a24 24 0 0 0 24-24V239.64l20.2 17.9a12 12 0 0 0 16.9-1.6l25.5-28a12 12 0 0 0-1.6-16.9z"/>
  </svg>
  Home
</a>

<style>
  /* Style umum tombol */
  #btn-home-left, #btn-home-right {
    position: fixed;
    display: flex;
    align-items: center;
    background-color: #007bff;
    color: #fff;
    padding: 12px 18px;
    border-radius: 8px;
    text-decoration: none;
    font-family: Arial, sans-serif;
    font-size: 14px;
    font-weight: bold;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: background 0.3s ease, transform 0.2s ease;
    z-index: 9999;
  }

  #btn-home-left:hover, #btn-home-right:hover {
    background-color: #0056b3;
    transform: scale(1.05);
  }

  /* Tombol kiri */
  #btn-home-left {
    left: 10px;
    top: 30%;
    transform: translateY(-50%);
  }

  /* Tombol kanan */
  #btn-home-right {
    right: 10px;
    bottom: 20%;
    transform: translateY(50%);
  }

  #btn-home-left svg, #btn-home-right svg {
    flex-shrink: 0;
  }
</style>
<div id="related-posts-container"><ul id="related-posts-list"></ul></div><script src="/ext/related.js"></script></body>
</html>
