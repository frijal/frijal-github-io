<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">

  <title>nixos-mirror.sh ‚Äî Mirror Tercepat untuk NixOS</title>
  <meta name="description" content="Skrip bash untuk mengatur substituter (mirror repository) tercepat secara otomatis di NixOS. Panduan mempercepat nix-env dan nixos-rebuild.">
  <meta name="keywords" content="NixOS, nixos-mirror, substituter, mirror repository, nix-env, nixos-rebuild, Linux, tutorial">
  <meta name="author" content="Fakhrul">
  <meta name="date" content="2025-09-28" scheme="YYYY-MM-DD">

  <!-- Canonical -->
  <link rel="canonical" href="https://frijal.pages.dev/artikel/nixos-mirror.html">

  <!-- Favicon -->
  <link rel="icon" href='data:image/svg+xml;utf8,
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <text y="0.9em" font-size="90">‚ö°</text></svg>'>

  <!-- Open Graph -->
  <meta property="og:title" content="nixos-mirror.sh ‚Äî Mirror Tercepat untuk NixOS">
  <meta property="og:description" content="Skrip bash untuk mengatur substituter (mirror repository) tercepat secara otomatis di NixOS.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://frijal.pages.dev/artikel/nixos-mirror.html">
  <meta property="og:image" content="https://frijal.pages.dev/img/nixos-mirror.jpg">
  <meta property="og:image:alt" content="nixos-mirror.sh ‚Äî Mirror Tercepat untuk NixOS">
  <meta property="og:locale" content="id_ID">
  <meta property="og:site_name" content="Frijal Docs">
  <meta property="article:published_time" content="2025-09-16T11:00:00+08:00">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="nixos-mirror.sh ‚Äî Mirror Tercepat untuk NixOS">
  <meta name="twitter:description" content="Skrip bash untuk mengatur substituter (mirror repository) tercepat di NixOS.">
  <meta name="twitter:image" content="https://frijal.pages.dev/img/nixos-mirror.jpg">
  <meta name="twitter:site" content="@your_twitter_handle">

  <!-- Schema.org JSON-LD -->
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"TechArticle","headline":"nixos-mirror.sh ‚Äî Mirror Tercepat untuk NixOS","description":"Skrip bash untuk mengatur substituter (mirror repository) tercepat secara otomatis di NixOS.","author":{"@type":"Person","name":"Fakhrul","image":"https://frijal.pages.dev/img/nixos-mirror.jpg"},"datePublished":"2025-09-16T11:00:00+08:00","image":"https://frijal.pages.dev/img/nixos-mirror.jpg","publisher":{"@type":"Organization","name":"Frijal Docs","logo":{"@type":"ImageObject","url":"https://frijal.pages.dev/artikel/icons/nixos.png","image":"https://frijal.pages.dev/img/nixos-mirror.jpg"},"image":"https://frijal.pages.dev/img/nixos-mirror.jpg"}}</script>

  <!-- PrismJS -->
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">

  <style>
  body {
    font-family: "Segoe UI", sans-serif;
    background: #fdfdfd;
    color: #222;
    line-height: 1.6;
    margin: 0;
    padding: 0;
    transition: background 0.3s, color 0.3s;
  }
  header {
    background: #00695c;
    color: #fff;
    padding: 18px;
    text-align: center;
  }
  header h1 { margin: 0; font-size: 1.3rem; }
  main { max-width: 900px; margin: 20px auto; padding: 20px; }
  h2 { color: #00695c; }
  .note {
    background: #e0f2f1;
    padding: 10px;
    border-left: 4px solid #00695c;
    border-radius: 6px;
    margin-bottom: 16px;
  }
  pre {
    position: relative;
    background: #2d2d2d;
    color: #f8f8f2;
    border-radius: 8px;
    overflow-x: auto;
    margin: 16px 0;
  }
  pre code { display: block; padding: 16px; }
  .copy-btn {
    position: absolute; top: 8px; right: 8px;
    background: #00695c; color: #fff;
    border: none; padding: 5px 10px;
    border-radius: 5px; cursor: pointer;
    font-size: 0.8rem;
  }
  .download-btn {
    display: inline-block; background: #00897b; color: #fff;
    text-decoration: none; padding: 8px 14px;
    border-radius: 6px; font-size: 0.9rem; margin-top: 10px;
  }
  .download-btn:hover { background: #004d40; }
  footer {
    text-align: center; padding: 10px; margin-top: 20px;
    font-size: 0.9rem; color: #666;
  }
  /* Dark mode */
  .dark-mode { background: #121212; color: #eaeaea; }
  .dark-mode header { background: #004d40; }
  .dark-mode h2 { color: #80cbc4; }
  .dark-toggle {
    position: fixed; top: 30%; right: 12px;
    padding: 6px 12px; border: none; border-radius: 6px;
    cursor: pointer; background: #00695c; color: #fff;
    font-size: 0.9rem;
  }
  img[loading="lazy"] { max-width:100%; height:auto; cursor:pointer; }
  .lightbox {
    display:none; position:fixed; z-index:9999; top:0; left:0;
    width:100%; height:100%; background:rgba(0,0,0,0.9);
    justify-content:center; align-items:center;
  }
  .lightbox img { max-width:90%; max-height:80%; }
  .lightbox .close, .lightbox .prev, .lightbox .next {
    position:absolute; color:#fff; font-size:2rem;
    cursor:pointer; user-select:none;
  }
  .lightbox .close { top:20px; right:30px; }
  .lightbox .prev { top:50%; left:30px; transform:translateY(-50%); }
  .lightbox .next { top:50%; right:30px; transform:translateY(-50%); }
  .share-icons img { width:32px; height:32px; margin:0 6px; }
  </style>
<meta itemprop="image" content="https://frijal.pages.dev/img/nixos-mirror.jpg">
<link rel="stylesheet" href="/ext/marquee-url.css">
</head>
<body>
  <button class="dark-toggle" onclick="toggleDarkMode()">üåô Dark Mode</button>
  <header>
    <h1>‚ö° Skrip nixos-mirror.sh</h1>
<div id="iposbrowser"></div>
    <p>Atur substituter tercepat untuk NixOS</p>
  </header>

  <main>
    <h2>Penjelasan</h2>
    <p>
      NixOS menggunakan <code>nix.conf</code> untuk mengatur substituter (mirror repository).  
      Dengan menambahkan mirror tercepat, kita bisa mempercepat proses <code>nix-env</code> dan <code>nixos-rebuild</code>.  
      Skrip ini otomatis backup konfigurasi lama dan menambahkan substituter baru.
    </p>
    <div class="note">‚ö†Ô∏è Jalankan dengan <code>sudo</code> karena butuh akses tulis ke <code>/etc/nix/nix.conf</code>.</div>

    <h2>Kode Skrip</h2>
    <pre>
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<code class="language-bash">#!/bin/bash
# nixos-mirror.sh ‚Äî atur substituter mirror tercepat NixOS
set -e

CONF_FILE="/etc/nix/nix.conf"
BACKUP_FILE="/etc/nix/nix.conf.backup"
MIRROR_SJTU="https://mirror.sjtu.edu.cn/nix-channels/store"
SJTU_PUBLIC_KEY="mirror.sjtu.edu.cn-1:7VqV0Jc9X4wS9W10zJ/2YkYQ75o+b45rA+VzT5ZqF38="

# Cek apakah dijalankan sebagai root
if [ "$(id -u)" -ne 0 ]; then
   echo "[ERROR] Skrip ini harus dijalankan dengan 'sudo'." >&2
   exit 1
fi

echo "[INFO] Membackup konfigurasi lama ke $BACKUP_FILE ..."
cp "$CONF_FILE" "$BACKUP_FILE"

# Tambahkan substituter mirror
if grep -q "substituters" "$CONF_FILE"; then
    sed -i "/^substituters/ s/$/ $MIRROR_SJTU/" "$CONF_FILE"
else
    echo "substituters = https://cache.nixos.org $MIRROR_SJTU" >> "$CONF_FILE"
fi

# Tambahkan public key
if grep -q "trusted-public-keys" "$CONF_FILE"; then
    sed -i "/^trusted-public-keys/ s/$/ $SJTU_PUBLIC_KEY/" "$CONF_FILE"
else
    echo "trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= $SJTU_PUBLIC_KEY" >> "$CONF_FILE"
fi

echo "[INFO] Update channel..."
nix-channel --update

echo "[DONE] Substituter NixOS berhasil ditambahkan."
</code>
</pre>

<h2>Komentar</h2>
<div id="fb-root"></div>
<div class="fb-comments"
     data-href="https://frijal.pages.dev/artikel/nixos-mirror.html"
     data-width="100%" data-numposts="5" data-colorscheme="light"></div>
</main>

<footer>
  üÑØ 2025 ‚Ä¢ nixos-mirror.sh ‚Äî pastikan public key substituter benar agar paket bisa diverifikasi.
</footer>

<!-- Lightbox -->
<div id="lightbox" class="lightbox">
  <span class="close" onclick="closeLightbox()">&times;</span>
  <span class="prev" onclick="changeImage(-1)">&#10094;</span>
  <img id="lightbox-img" src="" alt="">
  <span class="next" onclick="changeImage(1)">&#10095;</span>
</div>

<!-- PrismJS -->
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>

<script>
function copyCode(btn) {
  const code = btn.nextElementSibling.textContent;
  navigator.clipboard.writeText(code).then(() => {
    btn.textContent = "Copied!";
    setTimeout(() => { btn.textContent = "Copy"; }, 1500);
  });
}
function toggleDarkMode() {
  document.body.classList.toggle("dark-mode");
  const btn = document.querySelector(".dark-toggle");
  btn.textContent = document.body.classList.contains("dark-mode") ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";
}

// Lightbox
let currentIndex = 0;
const images = Array.from(document.querySelectorAll("main img[loading='lazy']"));
images.forEach((img, i) => {
  img.addEventListener("click", () => openLightbox(i));
});
function openLightbox(index) {
  currentIndex = index;
  document.getElementById("lightbox-img").src = images[index].src;
  document.getElementById("lightbox").style.display = "flex";
}
function closeLightbox() {
  document.getElementById("lightbox").style.display = "none";
}
function changeImage(step) {
  currentIndex = (currentIndex + step + images.length) % images.length;
  document.getElementById("lightbox-img").src = images[currentIndex].src;
}

// Load Facebook SDK
(function(d, s, id){
  let js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "https://connect.facebook.net/id_ID/sdk.js#xfbml=1&version=v12.0&appId=1471267430691023";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<div class="search-floating-container"><input type="text" id="floatingSearchInput" placeholder="cari artikel..." autocomplete="off"><span id="floatingSearchClear" class="clear-button">&times;</span><div id="floatingSearchResults" class="floating-results-container"></div></div>
<section id="related-marquee-section"><div id="related-marquee-container"></div></section><div id="kategori-aktif"></div><script src="/ext/marquee-url.js"></script><script defer src="/ext/iposbrowser.js"></script>
</body>
</html>

