fetch('https://api.ipify.org?format=json')
                .then(response => response.json())
                .then(data => {
                    const ipAddress = data.ip;
                    fetch(`https://ipapi.co/${ipAddress}/json/`)
                        .then(response => response.json())
                        .then(data => {
                            if (data.city && data.country_name && data.country_code) {
                                const flag = data.country_code.toLowerCase();
                                document.getElementById('ip-info').innerHTML = `<strong>Lokasi IP</strong>: ${data.city}, ${data.country_name} <img src="https://flagcdn.com/16x12/${flag}.png" alt="${data.country_name} flag" class="inline-block ml-1">`;
                            } else {
                                document.getElementById('ip-info').innerHTML = `<strong>Lokasi IP</strong>: Alamat IP Anda adalah ${ipAddress}`;
                            }
                        })
                        .catch(error => {
                            console.error('Error fetching IP details:', error);
                            document.getElementById('ip-info').innerHTML = `<strong>Lokasi IP</strong>: Gagal mendapatkan info lokasi.`;
                        });
                })
                .catch(error => {
                    console.error('Error fetching IP:', error);
                    document.getElementById('ip-info').innerHTML = `<strong>Lokasi IP</strong>: Gagal mendeteksi.`;
                });
