// UA detect
        ;(function () {
          const chip = document.getElementById('ua-chip')
          const uaInline = document.getElementById('ua-inline')
          const ua = navigator.userAgent
          const os = /Windows NT/.test(ua)
            ? 'Windows'
            : /Android/.test(ua)
              ? 'Android'
              : /iPhone|iPad|iPod/.test(ua)
                ? 'iOS'
                : /Mac OS X/.test(ua)
                  ? 'macOS'
                  : /Linux/.test(ua)
                    ? 'Linux'
                    : 'OS?'
          const br = /Edg\//.test(ua)
            ? 'Edge'
            : /OPR\//.test(ua)
              ? 'Opera'
              : /Chrome\//.test(ua)
                ? 'Chrome'
                : /Safari\//.test(ua) && !/Chrome\//.test(ua)
                  ? 'Safari'
                  : /Firefox\//.test(ua)
                    ? 'Firefox'
                    : 'Browser?'
          const txt = br + ' â€¢ ' + os
          chip.textContent = 'ğŸ§© ' + txt
          if (uaInline) uaInline.textContent = 'Perangkat kamu: ' + txt
        })()

        // IP Geolocation (city + flag)
        ;(function () {
          const geoChip = document.getElementById('geo-chip')
          const geo = document.getElementById('geo')
          const flag = document.getElementById('flag')
          const toFlag = (cc) =>
            !cc
              ? 'ğŸ³ï¸'
              : String.fromCodePoint(
                  ...cc
                    .trim()
                    .toUpperCase()
                    .split('')
                    .map((c) => 0x1f1e6 + c.charCodeAt(0) - 65),
                )
          fetch('https://ipapi.co/json/')
            .then((r) => (r.ok ? r.json() : Promise.reject()))
            .then((j) => {
              const city = j.city || 'Kota tidak diketahui'
              const country = j.country_name || ''
              const cc = j.country || ''
              const t = city + (country ? ', ' + country : '')
              geoChip.textContent = 'ğŸ“ ' + t
              if (geo) geo.textContent = t
              if (flag) flag.textContent = toFlag(cc)
            })
            .catch(() =>
              fetch('https://ipwho.is/')
                .then((r) => r.json())
                .then((j) => {
                  const city = j.city || 'Kota tidak diketahui'
                  const country = j.country || ''
                  const cc = j.country_code || ''
                  const t = city + (country ? ', ' + country : '')
                  geoChip.textContent = 'ğŸ“ ' + t
                  if (geo) geo.textContent = t
                  if (flag) flag.textContent = toFlag(cc)
                })
                .catch(() => {
                  geoChip.textContent = 'ğŸ“ Lokasi tidak tersedia'
                  if (geo) geo.textContent = 'Lokasi tidak tersedia'
                  if (flag) flag.textContent = 'ğŸ³ï¸'
