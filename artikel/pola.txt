// Fetch public IP + country flag using public API (client-side)
    (function fetchIp(){
      // ipapi.co JSON endpoint (no key, simple)
      fetch('https://ipapi.co/json/')
        .then(r=>r.json())
        .then(data=>{
          const ip = data.ip || 'â€”';
          const country = data.city || data.country || '';
          const flag = data.country_code ? `https://flagcdn.com/16x12/${data.country_code.toLowerCase()}.png` : '';
          document.querySelector('#ip-info span').textContent = ip + (country? (' - ' + country): '');
          if(flag){
            document.getElementById('flag').src = flag;
            document.getElementById('flag').alt = data.country_name || data.country_code;
          }
          // Update structured data with geo
          window.__clientLocation = {ip, country, countryCode: data.country_code};
          generateJsonLd();
        }).catch(err=>{
          document.querySelector('#ip-info span').textContent = 'Gagal ambil IP publik';
          generateJsonLd();
        });
    })();
