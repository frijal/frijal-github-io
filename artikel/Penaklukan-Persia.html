<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <title>Sejarah Islam Penaklukan Persia</title>
  <!-- minta kamu ganti deskripsi singkat yang jujur dan memikat -->
  <meta name="description" content="Kisah penaklukan Persia: dari ekspedisi awal hingga runtuhnya Sassanid, pertempuran besar, dan warisan budaya yang membentuk peradaban Islam.">
<meta property="og:description" content="Kisah penaklukan Persia: dari ekspedisi awal hingga runtuhnya Sassanid, pertempuran besar, dan warisan budaya yang membentuk peradaban Islam.">
<meta name="twitter:description" content="Kisah penaklukan Persia: dari ekspedisi awal hingga runtuhnya Sassanid, pertempuran besar, dan warisan budaya yang membentuk peradaban Islam.">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico">

  <!-- Canonical (dinamis via JS agar cocok di setiap slug GitHub Pages) -->
  <link id="canonical-link" rel="canonical" href="https://frijal.github.io/artikel/Penaklukan-Persia.html">

  <!-- Open Graph -->
  <meta property="og:type" content="article">
  <meta property="og:title" content="Penaklukan Persia">
  <meta property="og:url" content="https://frijal.github.io/artikel/Penaklukan-Persia.html">
  <meta property="og:site_name" content="Frijal">
  <meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjvleuZqlPcC_KsQCuhIpLX9b5-3Zz-jCEwEBMfDoyQhwyusyuCzhEhH21Y6RtmrSFRbpk7EXs549RJ8rqJ513Una9cPLwFHuVEAyrLRBdtvcG5yg1IB4vNWB1LTflX76Ie9vkkL4YE_t3QIZX0Pb_1cTGbgHlS5F4hDPxhCj_WSlP6nCuyf4QqYMG7xQs/s1600/persia.jpg">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Penaklukan Persia">
  <meta name="twitter:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjvleuZqlPcC_KsQCuhIpLX9b5-3Zz-jCEwEBMfDoyQhwyusyuCzhEhH21Y6RtmrSFRbpk7EXs549RJ8rqJ513Una9cPLwFHuVEAyrLRBdtvcG5yg1IB4vNWB1LTflX76Ie9vkkL4YE_t3QIZX0Pb_1cTGbgHlS5F4hDPxhCj_WSlP6nCuyf4QqYMG7xQs/s1600/persia.jpg">

  <!-- JSON-LD Article schema (di-update dinamis via JS) -->
  <script type="application/ld+json" id="ld-json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://frijal.github.io/artikel/Penaklukan-Persia.html"
    },
    "headline": "Penaklukan Persia",
  "description": "Kisah penaklukan Persia: dari ekspedisi awal hingga runtuhnya Sassanid, pertempuran besar, dan warisan budaya yang membentuk peradaban Islam.",
    "image": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjvleuZqlPcC_KsQCuhIpLX9b5-3Zz-jCEwEBMfDoyQhwyusyuCzhEhH21Y6RtmrSFRbpk7EXs549RJ8rqJ513Una9cPLwFHuVEAyrLRBdtvcG5yg1IB4vNWB1LTflX76Ie9vkkL4YE_t3QIZX0Pb_1cTGbgHlS5F4hDPxhCj_WSlP6nCuyf4QqYMG7xQs/s1600/persia.jpg",
    "author": {
      "@type": "Person",
      "name": "Fakhrul"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Frijal",
      "logo": {
        "@type": "ImageObject",
        "url": "https://frijal.github.io/logo.png"
      }
    },
    "datePublished": "2025-09-24T00:56:00+08:00",
    "dateModified": "2025-09-24T00:56:00+08:00"
  }
  </script>

  <!-- Wajib dimasukkan setelah </title> sesuai permintaan -->
  <link rel="stylesheet" href="/ext/related.css">

  <style>
    :root{
      --bg: #0e0f14;
      --surface: #151826;
      --text: #e9f0ff;
      --muted: #b8c1d9;
      --primary: #6dd3ff;
      --primary-2: #9c6dff;
      --accent: #ff8aa9;
      --success: #5ef3b1;
      --warning: #ffd66d;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 14px;
      --maxw: 860px;
      --gap: 24px;
    }

    /* Reset ringan */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { margin:0; padding:0; background: var(--bg); color: var(--text); }
    img { max-width: 100%; height: auto; display: block; }
    a { color: var(--primary); text-decoration: none; }
    a:hover { color: var(--accent); }
    button { font: inherit; cursor: pointer; }

    /* Progress bar scroll */
    #scroll-progress {
      position: fixed; top:0; left:0; height: 4px; width: 0%;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      box-shadow: var(--shadow);
      z-index: 9999;
    }

    /* Header hero */
    header.hero {
      position: relative;
      padding: 56px 20px 24px;
      background:
        radial-gradient(1200px 600px at 10% -20%, rgba(109,211,255,.20), transparent 60%),
        radial-gradient(1200px 600px at 90% -20%, rgba(156,109,255,.20), transparent 60%),
        linear-gradient(180deg, #111427, #0e0f14 60%);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .site-title { font-weight: 700; letter-spacing:.4px; color: var(--muted); margin-bottom: 12px; }
    .article-title {
      font-size: clamp(24px, 5vw, 42px);
      line-height: 1.1;
      margin: 10px 0 12px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .article-sub { color: var(--muted); max-width: 780px; }

    /* Info bar: browser/OS/IP */
    .infobar {
      display: grid; grid-template-columns: 1fr; gap: 10px;
      padding: 12px 16px; margin-top: 16px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 12px;
      backdrop-filter: blur(5px);
    }
    .infobar span { color: var(--muted); }
    .flag { font-size: 20px; margin-right: 6px; }

    /* Main satu kolom wide fullscreen */
    main {
      display: block;
      width: min(100%, 1200px);
      margin: 0 auto;
      padding: 24px 20px 100px;
    }
    .content {
      width: min(100%, var(--maxw));
      margin: 0 auto;
    }

    /* Section card */
    section.card {
      background: var(--surface);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px;
      margin: 18px 0;
      transition: transform .2s ease, box-shadow .2s ease;
    }
    section.card:hover { transform: translateY(-2px); box-shadow: 0 14px 34px rgba(0,0,0,.45); }
    section.card h2 {
      margin: 0 0 12px; font-size: 22px; letter-spacing:.3px;
      color: #fff;
    }
    section.card p { color: var(--muted); }

    /* Galeri grid */
    .gallery {
      display: grid; gap: 12px;
      grid-template-columns: repeat(3, 1fr);
      margin: 8px 0 4px;
    }
    @media (max-width: 960px) { .gallery { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 560px) { .gallery { grid-template-columns: 1fr; } }
    .gallery figure {
      position: relative; margin:0; border-radius: 12px; overflow: hidden;
      border: 1px solid rgba(255,255,255,.08);
      background: #0f121d;
    }
    .gallery img {
      width: 100%; height: 100%; object-fit: cover;
      aspect-ratio: 4 / 3;
      transition: transform .25s ease, filter .25s ease;
      filter: saturate(1.05) contrast(1.05);
    }
    .gallery figure:hover img { transform: scale(1.02); filter: saturate(1.15) contrast(1.1); }
    .gallery figcaption {
      position: absolute; left:0; right:0; bottom:0;
      padding: 8px 10px; font-size: 13px; color: var(--muted);
      background: linear-gradient(180deg, transparent, rgba(0,0,0,.65));
    }

    /* Lightbox overlay */
    .lightbox {
      position: fixed; inset:0; display: none; place-items: center;
      background: rgba(0,0,0,.7);
      backdrop-filter: blur(4px);
      z-index: 9998;
    }
    .lightbox.active { display: grid; }
    .lightbox-content {
      position: relative; width: min(92vw, 1100px); max-height: 88vh;
      background: #0f121d; border: 1px solid rgba(255,255,255,.1);
      border-radius: 12px; box-shadow: var(--shadow); overflow: hidden;
    }
    .lightbox-img { width: 100%; height: auto; display: block; }
    .lightbox-caption { padding: 10px 14px; font-size: 14px; color: var(--muted); }
    .lightbox-controls {
      position: absolute; inset: 0; display: flex; align-items: center; justify-content: space-between;
      pointer-events: none;
    }
    .lb-btn {
      pointer-events: auto; border: none; background: rgba(255,255,255,.08); color: #fff;
      padding: 10px 14px; border-radius: 10px; margin: 10px; transition: background .2s ease;
    }
    .lb-btn:hover { background: rgba(255,255,255,.18); }
    .lb-close { position: absolute; top: 10px; right: 12px; }

    /* Share bar */
    .share {
      display: flex; gap: 10px; align-items: center; flex-wrap: wrap;
      padding: 10px; margin-top: 8px;
      border-top: 1px dashed rgba(255,255,255,.1);
    }
    .share .label { color: var(--muted); font-size: 14px; margin-right: 4px; }
    .share a.btn {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 8px 12px; border-radius: 10px;
      background: rgba(255,255,255,.08);
      color: #fff;
      transition: transform .2s ease, background .2s ease;
    }
    .share a.btn:hover { transform: translateY(-2px); background: rgba(255,255,255,.16); }
    .share svg { width: 18px; height: 18px; }

    /* Tombol Sitemap & Home */
    .btn-sitemap {
      position: fixed; left: 10px; top: 30%;
      z-index: 9999;
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      color: #0b0c12; border: none; padding: 10px 14px; border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .btn-home {
      position: fixed; right: 10px; bottom: 20%;
      z-index: 9999;
      background: linear-gradient(135deg, var(--accent), var(--warning));
      color: #0b0c12; border: none; padding: 10px 14px; border-radius: 12px;
      box-shadow: var(--shadow);
    }

    /* Footer & FB comments */
    footer {
      width: min(100%, var(--maxw)); margin: 30px auto 60px;
      color: var(--muted); text-align: center;
    }

    /* Tipografi konten */
    .content p { line-height: 1.7; font-size: 17px; }
    .content blockquote {
      margin: 16px 0; padding: 14px 16px; border-left: 3px solid var(--accent);
      background: rgba(255,255,255,.04); border-radius: 10px; color: var(--muted);
    }
    .content hr { border: none; height: 1px; background: rgba(255,255,255,.08); margin: 20px 0; }
    .muted { color: var(--muted); }
    
    /* Timeline */
.timeline {
  position: relative;
  margin: 20px 0;
  padding-left: 20px;
  border-left: 3px solid var(--primary);
}
.timeline-item {
  margin: 20px 0;
  position: relative;
}
.timeline-item::before {
  content: attr(data-year);
  position: absolute;
  left: -80px;
  top: 0;
  font-weight: bold;
  color: var(--accent);
}
.timeline-item h3 {
  margin: 0 0 6px;
  font-size: 18px;
  color: #fff;
}
.timeline-item p {
  margin: 0;
  color: var(--muted);
  font-size: 15px;
}

/* Progress bar di bawah timeline */
.timeline-progress {
  position: relative;
  height: 6px;
  background: rgba(255,255,255,.1);
  border-radius: 4px;
  margin-top: 20px;
  overflow: hidden;
}
.timeline-progress span {
  display: block;
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--primary), var(--accent));
  transition: width .4s ease;
}
/* Grid tokoh */
.tokoh-grid {
  display: grid;
  gap: 20px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  margin-top: 16px;
}
.tokoh-card {
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 12px;
  padding: 16px;
  text-align: center;
  transition: transform .2s ease, box-shadow .2s ease;
}
.tokoh-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 24px rgba(0,0,0,.4);
}
.tokoh-card img {
  width: 100%;
  max-width: 140px;
  aspect-ratio: 1/1;
  object-fit: cover;
  border-radius: 50%;
  margin: 0 auto 12px;
  border: 2px solid var(--primary);
}
.tokoh-card h3 {
  margin: 6px 0;
  font-size: 18px;
  color: #fff;
}
.tokoh-card p {
  font-size: 14px;
  color: var(--muted);
  line-height: 1.5;
}
.leaflet-interactive {
  filter: drop-shadow(0 0 6px rgba(109,211,255,.8));
}

  </style>
</head>
<body>
  <div id="scroll-progress"></div>

  <a class="btn-sitemap" href="https://frijal.github.io/sitemap.html" aria-label="Sitemap">📜 Sitemap</a>
  <a class="btn-home" href="https://frijal.github.io/artikel/Penaklukan-Persia.html" aria-label="Home">🏠 Home</a>

  <header class="hero">
    <div class="content">
      <div class="site-title">Artikel Sejarah</div>
      <h1 class="article-title">Penaklukan Persia</h1>
<p class="article-sub">
  Penaklukan Persia bukan sekadar kisah perang, tapi titik balik besar yang mengubah arah sejarah Islam. 
  Di sini kamu akan menemukan cerita tentang strategi, tokoh, dan warisan budaya yang lahir dari peristiwa ini.
</p>


      <div class="infobar" id="infobar">
        <div><strong>Browser:</strong> <span id="browser-name">-</span> • <strong>OS:</strong> <span id="os-name">-</span>
        <strong>Lokasi IP:</strong> <span id="geo"><span class="flag">🏳️</span><span id="city">-</span>, <span id="country">-</span></span></div>
      </div>
    </div>
  </header>

  <main>
    <div class="content">

       <!-- SECTION 1 -->
    <section class="card" id="section-1">
      <h2>Latar Belakang</h2>
      <p>
        Kekaisaran Sassanid Persia pada awal abad ke-7 sedang melemah akibat konflik internal dan peperangan panjang dengan Bizantium. 
        Di sisi lain, umat Islam yang baru saja menyelesaikan ekspansi di Jazirah Arab mulai bergerak keluar, dipimpin oleh para sahabat Nabi. 
        Kondisi ini membuka jalan bagi pertemuan dua kekuatan besar.<img alt="" border="0" data-original-height="1920" data-original-width="1920" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjvleuZqlPcC_KsQCuhIpLX9b5-3Zz-jCEwEBMfDoyQhwyusyuCzhEhH21Y6RtmrSFRbpk7EXs549RJ8rqJ513Una9cPLwFHuVEAyrLRBdtvcG5yg1IB4vNWB1LTflX76Ie9vkkL4YE_t3QIZX0Pb_1cTGbgHlS5F4hDPxhCj_WSlP6nCuyf4QqYMG7xQs/s1600/persia.jpg"/>
      </p>
    </section>

    <!-- SECTION 2 -->
    <section class="card" id="section-2">
      <h2>Pertempuran Awal</h2>
      <p>
        Ekspedisi pertama dipimpin Khalid bin al-Walid sekitar tahun 633 M. 
        Ia memenangkan pertempuran di Dzat as-Salasil, Ullais, dan menaklukkan kota al-Hirah. 
        Kemenangan ini menandai awal masuknya pasukan Muslim ke wilayah Irak, pintu gerbang Persia.
      </p>
    </section>

    <!-- SECTION 3 -->
    <section class="card" id="section-3">
      <h2>Pertempuran Besar</h2>
      <p>
        Pada masa Khalifah Umar bin Khattab, pasukan Muslim menghadapi pertempuran besar di Qadisiyyah (636 M). 
        Di bawah komando Sa’d bin Abi Waqqash, pasukan Muslim berhasil mengalahkan tentara Persia yang dipimpin Rustum. 
        Kemenangan ini membuka jalan menuju ibu kota Mada’in, yang jatuh pada 637 M. 
        Beberapa tahun kemudian, pertempuran Nahawand (642 M) menjadi penentu, dikenal sebagai “Kemenangan Besar” (*Fath al-Futuh*).
      </p>
    </section>

    <!-- SECTION 4 -->
    <section class="card" id="section-4">
      <h2>Runtuhnya Kekuasaan Sassanid</h2>
      <p>
        Raja terakhir Sassanid, Yazdegerd III, melarikan diri dari satu kota ke kota lain hingga akhirnya terbunuh. 
        Dengan itu, kekuasaan Persia runtuh, dan wilayahnya secara bertahap masuk ke dalam kekuasaan Daulah Islam.
      </p>
    </section>

    <!-- SECTION 5 -->
    <section class="card" id="section-5">
      <h2>Dampak Jangka Panjang</h2>
      <p>
        Penaklukan Persia membawa dampak besar: sistem administrasi dan budaya Persia diadopsi, 
        ilmu pengetahuan berkembang pesat, dan lahirlah generasi ulama, ilmuwan, serta sastrawan yang memperkaya peradaban Islam. 
        Persia menjadi pusat intelektual dunia Islam selama berabad-abad.
      </p>
    </section>

    <!-- SECTION 6 -->
    <section class="card" id="section-6">
      <h2>Refleksi</h2>
      <p>
        Penaklukan Persia bukan sekadar kemenangan militer, tetapi juga pertemuan dua peradaban besar. 
        Dari peristiwa ini lahir warisan ilmu, seni, dan spiritualitas yang masih terasa hingga kini. 
        Sejarah ini mengajarkan tentang dinamika kekuasaan, ketahanan iman, dan pentingnya pertukaran budaya.
      </p>
    </section>

            <!-- Share bar -->
        <div class="share" id="share">
          <span class="label">Bagikan:</span>
          <a class="btn" id="share-twitter" target="_blank" rel="noopener">
            <!-- Twitter icon -->
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53A4.48 4.48 0 0 0 12 7.5v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.7 7.7 0 0 0 23 3z"/></svg>
            Twitter
          </a>
          <a class="btn" id="share-fb" target="_blank" rel="noopener">
            <!-- Facebook icon -->
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22 12a10 10 0 1 0-11.6 9.9v-7h-2.8V12h2.8V9.6c0-2.8 1.7-4.3 4.2-4.3 1.2 0 2.4.2 2.4.2v2.6h-1.4c-1.4 0-1.8.9-1.8 1.8V12h3.1l-.5 2.9h-2.6v7A10 10 0 0 0 22 12z"/></svg>
            Facebook
          </a>
          <a class="btn" id="share-wa" target="_blank" rel="noopener">
            <!-- WhatsApp icon -->
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20 3.9A9.9 9.9 0 0 0 3.9 20L3 21l2.2-.6A9.9 9.9 0 1 0 20 3.9zm-8.1 15a8.1 8.1 0 1 1 7.9-8.1 8 8 0 0 1-7.9 8.1z"/><path d="M16.6 13.5c-.2-.1-1.3-.6-1.5-.6s-.3.1-.5.3-.5.6-.7.7-.3.1-.5 0a6.6 6.6 0 0 1-3-2.6c-.2-.3 0-.5.1-.6l.3-.4c.1-.2.2-.3.2-.5s-.1-.3-.1-.4-.5-1.2-.7-1.6-.4-.4-.6-.4h-.5a.9.9 0 0 0-.6.3 2.5 2.5 0 0 0-.8 1.8c0 2 .9 3.6 2.6 4.8a8.8 8.8 0 0 0 2.9 1.3h.7c.2 0 .5-.1.6-.3l.4-.6c.1-.1.1-.3.1-.4s-.1-.3-.3-.4z"/></svg>
            WhatsApp
          </a>
          <a class="btn" id="share-copy">
            <!-- Link icon -->
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3.9 12a5 5 0 0 1 5-5h3v2h-3a3 3 0 1 0 0 6h3v2h-3a5 5 0 0 1-5-5zm7-3h3a5 5 0 1 1 0 10h-3v-2h3a3 3 0 1 0 0-6h-3V9z"/></svg>
            Salin tautan
          </a>
        </div>
      </section>

     <!-- PETA INTERAKTIF -->
<section class="card" id="map-section">
  <h2>Peta Interaktif Penaklukan Persia</h2>
  <div id="map" style="height: 480px; border-radius: 12px; overflow: hidden;"></div>
</section>

<!-- TIMELINE INTERAKTIF -->
<section class="card" id="timeline">
  <h2>Kronologi Penaklukan Persia</h2>
  <div class="timeline">
    <div class="timeline-item" data-year="633">
      <h3>633 M — Ekspedisi Khalid bin al-Walid</h3>
      <p>Kemenangan di Dzat as-Salasil, Ullais, dan penaklukan al-Hirah.</p>
    </div>
    <div class="timeline-item" data-year="636">
      <h3>636 M — Pertempuran Qadisiyyah</h3>
      <p>Sa’d bin Abi Waqqash memimpin pasukan Muslim mengalahkan Rustum.</p>
    </div>
    <div class="timeline-item" data-year="637">
      <h3>637 M — Jatuhnya Mada’in</h3>
      <p>Ibu kota Persia jatuh, membuka jalan ke jantung kekuasaan Sassanid.</p>
    </div>
    <div class="timeline-item" data-year="642">
      <h3>642 M — Pertempuran Nahawand</h3>
      <p>Dikenal sebagai “Fath al-Futuh” (Kemenangan Besar), menandai runtuhnya Persia.</p>
    </div>
  </div>
  <div class="timeline-progress"><span></span></div>
</section>
<!-- KARTU TOKOH -->
<section class="card" id="tokoh">
  <h2>Tokoh-Tokoh Penting</h2>
  <div class="tokoh-grid">
    <div class="tokoh-card">
           <h3>Khalid bin al-Walid</h3>
      <p>“Pedang Allah” yang memimpin ekspedisi awal ke Irak (633 M), menaklukkan al-Hirah dan memenangkan banyak pertempuran.</p>
    </div>
    <div class="tokoh-card">
          <h3>Sa’d bin Abi Waqqash</h3>
      <p>Panglima di Qadisiyyah (636 M), berhasil mengalahkan Rustum dan membuka jalan ke Mada’in.</p>
    </div>
    <div class="tokoh-card">
            <h3>Rustum</h3>
      <p>Panglima besar Persia yang memimpin di Qadisiyyah, gugur dalam pertempuran menentukan itu.</p>
    </div>
    <div class="tokoh-card">
            <h3>Yazdegerd III</h3>
      <p>Raja terakhir Sassanid, melarikan diri setelah kekalahan demi kekalahan hingga akhirnya terbunuh.</p>
    </div>
  </div>
</section>


      <!-- FB Comments -->
      <section class="card">
        <h2>Ruang komentar</h2>
        <div id="fb-root"></div>
        <div class="fb-comments"
             data-href="https://frijal.github.io/artikel/Penaklukan-Persia.html"
             data-width="100%"
             data-numposts="5"></div>
      </section>

      <!-- Related posts container (sesuai permintaan) -->
      <div id="related-posts-container">
        <ul id="related-posts-list"></ul>
      </div>

    </div>
  </main>

  <footer>
    <p>© Frijal • Dibangun dengan cinta, warna, dan ketelitian.</p>
  </footer>

  <!-- Lightbox overlay -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
    <div class="lightbox-content">
      <img class="lightbox-img" id="lightbox-img" alt="">
      <div class="lightbox-caption" id="lightbox-caption"></div>
      <button class="lb-btn lb-prev" id="lb-prev" aria-label="Sebelumnya">⟨</button>
      <button class="lb-btn lb-next" id="lb-next" aria-label="Berikutnya">⟩</button>
      <button class="lb-btn lb-close" id="lb-close" aria-label="Tutup">✕</button>
      <div class="lightbox-controls"></div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Scroll progress
    const sp = document.getElementById('scroll-progress');
    const onScroll = () => {
      const h = document.documentElement;
      const scrolled = (h.scrollTop) / (h.scrollHeight - h.clientHeight) * 100;
      sp.style.width = scrolled + '%';
    };
    document.addEventListener('scroll', onScroll, { passive: true });
    onScroll();

    // Canonical & OG url dinamis
    (function(){
      const url = location.href;
      const canonical = document.getElementById('canonical-link');
      if (canonical) canonical.href = url;
      const ogUrl = document.querySelector('meta[property="og:url"]');
      if (ogUrl) ogUrl.setAttribute('content', url);
      const ld = document.getElementById('ld-json');
      if (ld) {
        try {
          const obj = JSON.parse(ld.textContent);
          obj.mainEntityOfPage['@id'] = url;
          obj.dateModified = new Date().toISOString();
          ld.textContent = JSON.stringify(obj);
        } catch(e){}
      }
    })();

    // Share buttons
    (function(){
      const url = encodeURIComponent(location.href);
      const title = encodeURIComponent(document.title);
      const tw = document.getElementById('share-twitter');
      const fb = document.getElementById('share-fb');
      const wa = document.getElementById('share-wa');
      const cp = document.getElementById('share-copy');

      if (tw) tw.href = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
      if (fb) fb.href = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
      if (wa) wa.href = `https://wa.me/?text=${title}%20${url}`;
      if (cp) cp.addEventListener('click', async () => {
        try { await navigator.clipboard.writeText(location.href); cp.textContent = 'Tautan tersalin ✓'; }
        catch(e){ cp.textContent = 'Gagal menyalin'; }
        setTimeout(()=>{ cp.textContent = 'Salin tautan'; }, 2000);
      });
    })();

    // Lightbox galeri
    (function(){
      const figures = Array.from(document.querySelectorAll('.gallery figure'));
      const lb = document.getElementById('lightbox');
      const img = document.getElementById('lightbox-img');
      const cap = document.getElementById('lightbox-caption');
      const prev = document.getElementById('lb-prev');
      const next = document.getElementById('lb-next');
      const close = document.getElementById('lb-close');

      let index = 0;

      const open = (i) => {
        index = i;
        const fig = figures[index];
        const el = fig.querySelector('img');
        img.src = el.dataset.full || el.src;
        img.alt = el.alt || '';
        cap.textContent = fig.querySelector('figcaption')?.textContent || '';
        lb.classList.add('active');
        document.body.style.overflow = 'hidden';
      };
      const move = (dir) => {
        index = (index + dir + figures.length) % figures.length;
        open(index);
      };
      const hide = () => {
        lb.classList.remove('active');
        document.body.style.overflow = '';
        img.src = '';
        cap.textContent = '';
      };

      figures.forEach((fig, i) => {
        fig.addEventListener('click', () => open(i));
      });
      prev.addEventListener('click', () => move(-1));
      next.addEventListener('click', () => move(1));
      close.addEventListener('click', hide);
      lb.addEventListener('click', (e) => { if (e.target === lb) hide(); });
      document.addEventListener('keydown', (e) => {
        if (!lb.classList.contains('active')) return;
        if (e.key === 'Escape') hide();
        if (e.key === 'ArrowLeft') move(-1);
        if (e.key === 'ArrowRight') move(1);
      });
    })();

    // Deteksi browser & OS sederhana
    (function(){
      const ua = navigator.userAgent;
      const browserEl = document.getElementById('browser-name');
      const osEl = document.getElementById('os-name');

      const browser =
        ua.includes('Edg/') ? 'Microsoft Edge' :
        ua.includes('OPR/') || ua.includes('Opera') ? 'Opera' :
        ua.includes('Chrome') ? 'Chrome' :
        ua.includes('Safari') && !ua.includes('Chrome') ? 'Safari' :
        ua.includes('Firefox') ? 'Firefox' :
        'Browser lain';

      const os =
        ua.includes('Windows NT') ? 'Windows' :
        ua.includes('Mac OS X') ? 'macOS' :
        ua.includes('Android') ? 'Android' :
        ua.includes('iPhone') || ua.includes('iPad') ? 'iOS' :
        ua.includes('Linux') ? 'Linux' :
        'OS lain';

      if (browserEl) browserEl.textContent = browser;
      if (osEl) osEl.textContent = os;
    })();

    // Lokasi IP + bendera negara (emoji)
    (function(){
      const cityEl = document.getElementById('city');
      const countryEl = document.getElementById('country');
      const flagEl = document.querySelector('#geo .flag');

      // helper: country code to emoji flag
      const flagEmoji = (cc) => {
        if (!cc) return '🏳️';
        const codePoints = [...cc.toUpperCase()].map(c => 127397 + c.charCodeAt());
        return String.fromCodePoint(...codePoints);
      };

      fetch('https://ipapi.co/json/')
        .then(res => res.json())
        .then(data => {
          const city = data.city || '-';
          const country = data.country_name || '-';
          const cc = data.country || '';
          cityEl.textContent = city;
          countryEl.textContent = country;
          flagEl.textContent = flagEmoji(cc);
        })
        .catch(() => {
          cityEl.textContent = '—';
          countryEl.textContent = '—';
          flagEl.textContent = '🏳️';
        });
    })();

    // Facebook SDK (komentar)
    (function(d, s, id){
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "https://connect.facebook.net/id_ID/sdk.js#xfbml=1&version=v19.0";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    
    // Timeline progress animation
(function(){
  const progress = document.querySelector('.timeline-progress span');
  const timeline = document.querySelector('#timeline');
  if (!timeline) return;

  const onScroll = () => {
    const rect = timeline.getBoundingClientRect();
    const winH = window.innerHeight;
    if (rect.top < winH && rect.bottom > 0) {
      const visible = Math.min(1, Math.max(0, (winH - rect.top) / (rect.height + winH)));
      progress.style.width = (visible * 100) + '%';
    }
  };
  document.addEventListener('scroll', onScroll, { passive: true });
  onScroll();
})();

  </script>
<script>
// Inisialisasi peta
const map = L.map('map').setView([32.0, 45.0], 5); // fokus Irak–Iran

// Tambahkan tile layer (OpenStreetMap)
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// Data lokasi pertempuran
const battles = [
  {
    name: "Pertempuran Dzat as-Salasil (633 M)",
    coords: [31.9, 47.1],
    desc: "Kemenangan awal Khalid bin al-Walid di Irak."
  },
  {
    name: "Pertempuran Qadisiyyah (636 M)",
    coords: [32.0, 44.9],
    desc: "Sa’d bin Abi Waqqash mengalahkan Rustum."
  },
  {
    name: "Jatuhnya Mada’in (637 M)",
    coords: [33.1, 44.6],
    desc: "Ibu kota Persia jatuh ke tangan Muslim."
  },
  {
    name: "Pertempuran Nahawand (642 M)",
    coords: [34.2, 48.4],
    desc: "Dikenal sebagai Fath al-Futuh (Kemenangan Besar)."
  }
];

// Tambahkan marker ke peta

battles.forEach(b => {
  L.marker(b.coords).addTo(map)
    .bindPopup(`<strong>${b.name}</strong><br>${b.desc}`);
});
</script>
<script>
// Koordinat rute (urut sesuai kronologi)
const routeCoords = battles.map(b => b.coords);

// Tambahkan polyline
const routeLine = L.polyline(routeCoords, {
  color: '#6dd3ff',
  weight: 4,
  opacity: 0.7,
  dashArray: '10, 10'
}).addTo(map);

// Animasi "garis berjalan"
let progress = 0;
function animateRoute() {
  progress += 1;
  if (progress > routeCoords.length * 50) return; // selesai
  const slice = Math.floor(progress / 50);
  const latlngs = routeCoords.slice(0, slice + 1);
  if (latlngs.length > 1) {
    routeLine.setLatLngs(latlngs);
  }
  requestAnimationFrame(animateRoute);
}
animateRoute();
</script>

  <!-- Related posts (sesuai permintaan) -->
  <script src="/ext/related.js"></script>
</body>
</html>
