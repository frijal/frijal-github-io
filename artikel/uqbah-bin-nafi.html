<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <!-- prettier-ignore -->
<title>Kisah Uqbah bin NƒÅfi‚Äò al-Fihrƒ´ Muslim</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Kisah Uqbah bin NƒÅfi‚Äò: dari Mekah hingga Samudra Atlantik, pendiri QairawƒÅn dan FƒÅti·∏• Ifriqiyah yang menautkan fut≈´hƒÅt Islam di Afrika Utara.">
  <meta name="keywords" content="Uqbah bin Nafi, Qairawan, Ifriqiyah, futuhat, sejarah Islam, Afrika Utara, Berber, Andalus">
  <meta name="author" content="Fakhrul">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#2A9D8F">

  <!-- Canonical -->
  <link rel="canonical" href="https://frijal.github.io/artikel/uqbah-bin-nafi.html">

  <!-- Favicon -->
  <link rel="icon" href="https://frijal.github.io/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="/icon.png">

  <!-- Open Graph -->
  <meta property="og:title" content="Kisah Uqbah bin NƒÅfi‚Äò al-Fihrƒ´ Muslim">
  <meta property="og:description" content="Dari Mekah hingga Samudra Atlantik, pendiri QairawƒÅn dan FƒÅti·∏• Ifriqiyah yang menautkan fut≈´hƒÅt Islam di Afrika Utara.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://frijal.github.io/artikel/uqbah-bin-nafi.html">
  <meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgUrFqnMAD057iVpFN4aadb8uhQoQ9l305Itnmkf9qbGiNQzYIRr2YrvKJMXExuD0H9n-ebcHW0t1wu4T5KQwHuokdTzuBjoAde09gK-b6sH3QZlK_OvyP_zb7IlzjFuycqRlJcaj62LUmSX4frtYHTBKTYh8btUZ95P4N1R3xzYtWk5BcrMrbQZK2PpGU/s1600/Uqbah.jpg">
  <meta property="og:site_name" content="Frijal">
  <meta property="og:locale" content="id_ID">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Kisah Uqbah bin NƒÅfi‚Äò al-Fihrƒ´ Muslim">
  <meta name="twitter:description" content="Pendiri QairawƒÅn dan FƒÅti·∏• Ifriqiyah, fut≈´hƒÅt Islam di Afrika Utara, dari Mesir hingga tepi Atlantik.">
  <meta name="twitter:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgUrFqnMAD057iVpFN4aadb8uhQoQ9l305Itnmkf9qbGiNQzYIRr2YrvKJMXExuD0H9n-ebcHW0t1wu4T5KQwHuokdTzuBjoAde09gK-b6sH3QZlK_OvyP_zb7IlzjFuycqRlJcaj62LUmSX4frtYHTBKTYh8btUZ95P4N1R3xzYtWk5BcrMrbQZK2PpGU/s1600/Uqbah.jpg">
  <meta name="twitter:site" content="@frijal">

  <!-- JSON-LD Article -->
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://frijal.github.io/artikel/uqbah-bin-nafi.html","image":"https://frijal.github.io/artikel/uqbah-bin-nafi.jpg"},"headline":"Kisah Uqbah bin NƒÅfi‚Äò al-Fihrƒ´ Muslim","description":"Kisah Uqbah bin NƒÅfi‚Äò: dari Mekah hingga Samudra Atlantik, pendiri QairawƒÅn dan FƒÅti·∏• Ifriqiyah yang menautkan fut≈´hƒÅt Islam di Afrika Utara.","image":"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgUrFqnMAD057iVpFN4aadb8uhQoQ9l305Itnmkf9qbGiNQzYIRr2YrvKJMXExuD0H9n-ebcHW0t1wu4T5KQwHuokdTzuBjoAde09gK-b6sH3QZlK_OvyP_zb7IlzjFuycqRlJcaj62LUmSX4frtYHTBKTYh8btUZ95P4N1R3xzYtWk5BcrMrbQZK2PpGU/s1600/Uqbah.jpg","author":{"@type":"Person","name":"Fakhrul","image":"https://frijal.github.io/artikel/uqbah-bin-nafi.jpg"},"publisher":{"@type":"Organization","name":"Frijal","logo":{"@type":"ImageObject","url":"https://frijal.github.io/logo.png","image":"https://frijal.github.io/artikel/uqbah-bin-nafi.jpg"},"image":"https://frijal.github.io/artikel/uqbah-bin-nafi.jpg"},"datePublished":"2025-09-24","dateModified":"2025-09-24"}</script>

  <!-- Gaya: satu kolom, wide fullscreen, emerald‚Äìgold, mobile-friendly -->
  <style>
    :root{
      --bg0:#0b1b1b; --bg1:#0f2222; --bg2:#0f1f2b;
      --emerald:#2A9D8F; --gold:#FFD166; --ink:#073B4C; --rose:#E76F51;
      --text:#eaf2f2; --muted:#c9d7d7; --card:#0c1720; --line:#144b4e;
      --shadow:0 14px 36px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{
      margin:0; padding:0;
      background:
        radial-gradient(1200px 380px at 12% -10%, rgba(42,157,143,.18), transparent),
        radial-gradient(900px 320px at 88% 0%, rgba(255,209,102,.14), transparent),
        linear-gradient(180deg, var(--bg0), var(--bg1) 40%, var(--bg2));
      color:var(--text);
      font:16px/1.7 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    }
    a{color:var(--gold); text-decoration:none}
    a:hover{text-decoration:underline}

    /* Header sticky */
    header.site{
      position:sticky; top:0; z-index:50;
      backdrop-filter:saturate(140%) blur(10px);
      background:linear-gradient(0deg, rgba(10,24,28,.85), rgba(10,24,28,.55));
      border-bottom:1px solid var(--line);
      box-shadow:var(--shadow);
    }
    .bar{
      width:min(1040px,92vw); margin:0 auto; padding:14px 10px;
      display:flex; align-items:center; gap:16px; flex-wrap:wrap;
    }
    .logo{
      width:38px; height:38px; border-radius:10px;
      background:linear-gradient(135deg, var(--emerald), var(--gold));
      box-shadow:var(--shadow);
    }
    .title{margin:0; font-size:1.15rem; letter-spacing:.2px}
    .meta{margin-left:auto; display:flex; gap:10px; flex-wrap:wrap}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border:1px solid var(--line); border-radius:999px;
      background:#0a1a22; color:var(--muted);
    }

    /* Layout 1 kolom */
    .wrap{width:min(980px,92vw); margin:0 auto; padding:24px 0 80px;}
    main.card{
      margin-top:18px; border:1px solid var(--line); border-radius:20px; overflow:hidden;
      background:linear-gradient(180deg, #0c1823, #0a1520);
      box-shadow:var(--shadow);
    }

    /* Hero */
    .hero{
      padding:32px 22px 18px;
      background:
        radial-gradient(900px 250px at 20% 10%, rgba(231,111,81,.12), transparent),
        radial-gradient(700px 220px at 80% 0%, rgba(42,157,143,.16), transparent);
    }
    .hero h2{margin:0 0 8px; font-size:clamp(1.6rem, 4.8vw, 2.5rem)}
    .hero p{margin:0; color:var(--muted); max-width:72ch}

    /* Konten */
    article.content{padding:24px 22px;}
    article.content p{margin:0 0 16px;}
    article.content h3{margin:18px 0 10px; font-size:1.15rem; color:#dfeeee}
    .aside{
      margin:18px 0; padding:14px 16px; border-radius:14px; background:var(--card); border:1px solid var(--line);
      color:#e7edff; box-shadow:var(--shadow);
    }

    /* Galeri */
    .gallery{
      display:grid; grid-template-columns:repeat(auto-fill, minmax(220px, 1fr));
      gap:14px; margin:20px 0;
    }
    .gallery img{
      width:100%; height:180px; object-fit:cover; border-radius:12px;
      border:1px solid var(--line); box-shadow:var(--shadow); cursor:zoom-in;
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .gallery img:hover{transform:translateY(-2px); box-shadow:0 18px 32px rgba(0,0,0,.4);}

    /* Lightbox */
    .lightbox{position:fixed; inset:0; background:rgba(6,14,18,.88); display:none; align-items:center; justify-content:center; z-index:1000;}
    .lightbox.active{display:flex;}
    .lightbox img{max-width:min(92vw,1200px); max-height:82vh; border-radius:18px; border:1px solid var(--line); box-shadow:var(--shadow)}
    .lightbox .caption{margin-top:12px; color:var(--muted); text-align:center; max-width:80ch}
    .lightbox .nav{position:absolute; inset:auto 0 8% 0; display:flex; justify-content:center; gap:12px}
    .btn{
      display:inline-flex; align-items:center; gap:8px; cursor:pointer;
      background:#0f2730; color:var(--text); border:1px solid var(--line); padding:10px 14px; border-radius:10px;
    }
    .btn:hover{background:#123241}

    /* Share */
    .share{display:flex; flex-wrap:wrap; gap:10px; margin:18px 0 4px;}
    .share a, .share button{border:none}

    /* Footer */
    footer.site{margin-top:24px; padding:18px 22px; color:var(--muted);}

    /* Tombol mengambang */
    .btn-sitemap{position:fixed; left:14px; top:30%; transform:translateY(-50%); z-index:800;}
    .btn-home{position:fixed; right:14px; bottom:20%; transform:translateY(50%); z-index:800;}

    /* Related posts */
    #related-posts-container{margin:24px 0;}
    #related-posts-list{list-style:none; padding:0; margin:10px 0; display:grid; gap:10px;}
    #related-posts-list li{background:var(--card); border:1px solid var(--line); border-radius:12px; padding:12px 14px;}

    /* Responsif */
    @media (max-width:640px){
      .pill{padding:6px 10px; font-size:.9rem}
      .gallery img{height:160px}
      .btn-sitemap, .btn-home{opacity:.94}
    }
  </style>

  <!-- Wajib: stylesheet related setelah </title> -->
  <div></div>
<meta name="date" content="2025-09-28">
<meta name="google-site-verification" content="9Jwla8V71mwNNZ4NNPThsK_BHpWn6quXWSs_VjPAflA" />
  <meta property="og:image:alt" content="Kisah Uqbah bin NƒÅfi‚Äò al-Fihrƒ´ Muslim">
  <meta itemprop="image" content="https://frijal.github.io/artikel/uqbah-bin-nafi.jpg">
<link rel="stylesheet" href="/ext/marquee-url.css">
</head>
<body>
  <!-- Tombol mengambang -->
  <a class="btn btn-sitemap" href="https://frijal.github.io/sitemap.html" aria-label="Sitemap">üó∫Ô∏è <span>Sitemap</span></a>
  <a class="btn btn-home" href="https://frijal.github.io/artikel.html" aria-label="Beranda Artikel">üè† <span>Home</span></a>

  <!-- Header -->
  <header class="site" role="banner">
    <div class="bar">
      <div class="logo" aria-hidden="true"></div>
      <h1 class="title">Frijal - Artikel</h1>

      <div class="meta">
        <div class="pill"><strong>Topik:</strong> Sejarah Islam</div>
        <div class="pill"><strong>Status:</strong> Terbit</div>
        <div class="pill" id="env-pill"><strong>Perangkat:</strong> <span id="env-text">Mendeteksi‚Ä¶</span></div>
        <div class="pill" id="ip-pill"><strong>Lokasi IP:</strong> <span id="ip-text">Memuat‚Ä¶</span></div>
      </div>
    </div>
  </header>

  <!-- Konten -->
  <div class="wrap">
    <main class="card" role="main">
      <section class="hero">
        <h2>Kisah Uqbah bin NƒÅfi‚Äò al-Fihrƒ´</h2>
        <p>Kisah seorang panglima yang hatinya selalu condong ke cahaya. Dari Mekah, Mesir, QairawƒÅn, hingga tepi Atlantik, jejaknya menautkan fut≈´hƒÅt Islam dan menyalakan keberanian yang bertahan lintas zaman.</p>
      </section>
      <article class="content">
        <h3>üåô Mekah, Tahun 1 Hijriyah / 622 M</h3>
        <p>Langit Mekah kala itu sedang ramai dengan kabar hijrah Rasulullah Ô∑∫ ke Madinah. Di sebuah rumah keluarga Quraisy, lahirlah seorang bayi dari kabilah Fihr. Ayahnya menatap wajah mungil itu dan berbisik,</p>
        <blockquote>‚ÄúEngkau akan kuberi nama Uqbah. Semoga kelak engkau menjadi pengikat kemenangan bagi kaum Muslimin.‚Äù</blockquote>
        <p>Bayi itu tumbuh dalam suasana perubahan besar: bangsa Quraisy yang dulu menentang kini berangsur masuk Islam, dan keluarga Uqbah termasuk di antara yang dekat dengan dakwah. Pamannya, ‚ÄòAmr bin al-‚ÄòƒÄ·π£, kelak menjadi panglima besar penakluk Mesir.</p>

        <hr>

        <h3>üèπ Masa Muda ‚Äì Bersama Pamannya di Mesir</h3>
        <p>Remaja Uqbah tumbuh sebagai pemuda tangkas, pandai menunggang kuda, dan gagah berani. Ketika pamannya, ‚ÄòAmr bin al-‚ÄòƒÄ·π£, diutus oleh Khalifah ‚ÄòUmar r.a. untuk menaklukkan Mesir, Uqbah ikut serta dalam rombongan.</p>
        <p>Di tepi Sungai Nil, ia melihat betapa tentara Islam begitu sedikit dibandingkan Bizantium. Namun semangat jihad membuat mereka menang. Uqbah berkata pada pamannya:</p>
        <blockquote>‚ÄúWahai paman, sungguh aku melihat Allah memenangkan kita bukan dengan banyaknya jumlah, tetapi dengan iman.‚Äù</blockquote>
        <p>‚ÄòAmr tersenyum: ‚ÄúEngkau benar, wahai Uqbah. Ingatlah, perjuangan ini tidak berhenti di Mesir. Masih ada negeri-negeri di barat yang menanti cahaya Islam.‚Äù Kalimat itu menancap dalam hati Uqbah.</p>

        <figure class="gallery" id="gallery">
          <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgUrFqnMAD057iVpFN4aadb8uhQoQ9l305Itnmkf9qbGiNQzYIRr2YrvKJMXExuD0H9n-ebcHW0t1wu4T5KQwHuokdTzuBjoAde09gK-b6sH3QZlK_OvyP_zb7IlzjFuycqRlJcaj62LUmSX4frtYHTBKTYh8btUZ95P4N1R3xzYtWk5BcrMrbQZK2PpGU/s1600/Uqbah.jpg"
               alt="Uqbah bin NƒÅfi‚Äò"
               loading="lazy"
               data-caption="Uqbah bin NƒÅfi‚Äò - panglima yang menautkan fut≈´hƒÅt dari Mesir ke Afrika Utara.">
          <img src="https://images.unsplash.com/photo-1548013146-72479768bada?q=80&w=1200&auto=format&fit=crop"
               alt="Masjid Agung QairawƒÅn"
               loading="lazy"
               data-caption="Masjid Agung QairawƒÅn - ikon ilmu dan dakwah di Ifriqiyah.">
          <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop"
               alt="Gurun menuju Atlantik"
               loading="lazy"
               data-caption="Bentang gurun menuju Samudra Atlantik - ujung barat fut≈´hƒÅt Uqbah.">
        </figure>

        <hr>

        <h3>üïå Mendirikan QairawƒÅn (Tunisia, 50 H / 670 M)</h3>
        <p>Waktu berlalu. Ketika Mu‚ÄòƒÅwiyah bin Abƒ´ SufyƒÅn menjadi khalifah, beliau menunjuk Uqbah untuk memimpin fut≈´hƒÅt ke Afrika Utara.</p>
        <p>Uqbah mendirikan sebuah kota di tengah hutan penuh binatang buas. Para prajurit sempat ketakutan. Namun Uqbah turun dari kudanya, mengangkat pedang, dan berseru lantang di hadapan semak belukar:</p>
        <blockquote>‚ÄúWahai penghuni hutan! Wahai binatang buas! Demi Allah, pergilah kalian dari sini. Tempat ini akan menjadi kota kaum Muslimin!‚Äù</blockquote>
        <p>Riuh suara aneh terdengar, seakan binatang-binatang itu berlarian meninggalkan tempat tersebut. Para prajurit tercengang. Di situlah kemudian berdiri QairawƒÅn, kota pertama Islam di Afrika Utara. Ia menjadi pusat ilmu, markas militer, dan mercusuar dakwah.</p>

        <hr>

        <h3>‚öîÔ∏è Ekspedisi ke Barat ‚Äì Melintasi Aljazair</h3>
        <p>Dengan QairawƒÅn sebagai basis, Uqbah membawa pasukannya ke barat. Mereka melintasi gurun luas, menghadapi suku Berber yang tangguh. Pertempuran demi pertempuran terjadi, namun kemenangan berpihak pada kaum Muslimin.</p>
        <p>Di sebuah perkampungan, seorang tokoh Berber berkata kepadanya:</p>
        <blockquote>‚ÄúWahai Uqbah, apa yang engkau cari hingga jauh datang ke negeri kami?‚Äù</blockquote>
        <p>Uqbah menjawab dengan penuh keyakinan: ‚ÄúKami datang bukan untuk merampas harta, bukan pula untuk memperbudak. Kami datang membawa cahaya Islam, agar kalian mengenal Allah yang Maha Esa.‚Äù Beberapa suku Berber pun mulai masuk Islam, terpesona oleh akhlak dan ketegasan sang panglima.</p>

        <hr>

        <h3>üåä Doa di Samudra Atlantik (62 H / 682 M)</h3>
        <p>Akhirnya, setelah menaklukkan kota demi kota, pasukan Uqbah tiba di tepi Samudra Atlantik di ujung Maroko. Ombak besar menggulung, langit barat memerah saat matahari terbenam.</p>
        <p>Uqbah turun dari kudanya, memacu hewan tunggangannya ke dalam air hingga ombak mencapai dadanya. Dengan mata berkaca-kaca, ia menengadah ke langit dan berdoa:</p>
        <blockquote>‚ÄúYa Allah, jika bukan karena samudra yang menghadangku, niscaya aku akan terus maju di jalan-Mu, menaklukkan negeri demi negeri, hingga tak ada lagi yang menyembah selain Engkau.‚Äù</blockquote>
        <p>Pasukannya terdiam, terharu mendengar doa itu. Mereka tahu, fut≈´hƒÅt ini bukan sekadar ekspansi, melainkan ibadah suci.</p>

        <hr>

        <h3>ü©∏ Syahid di Tah≈´da (63 H / 682 M)</h3>
        <p>Namun perjalanan pulang membawa ujian. Di wilayah Tah≈´da (Aljazair), suku Berber bersekutu dengan pasukan Bizantium untuk menghadang. Uqbah hanya bersama 300 prajurit setia, sementara musuh datang dalam jumlah besar.</p>
        <p>Seorang sahabatnya berkata: ‚ÄúWahai Uqbah, jumlah mereka terlalu banyak. Mungkin kita harus mundur.‚Äù</p>
        <p>Uqbah menggeleng tegas: ‚ÄúTidak! Mundur bukan jalan kita. Demi Allah, lebih baik kita syahid hari ini, daripada Islam kehilangan wibawa di mata musuh.‚Äù Pertempuran sengit pun pecah. Debu gurun bercampur dengan darah para syuhada. Di tengah pertempuran, Uqbah terus bertakbir hingga akhirnya ia roboh, tersambar pedang.</p>
        <blockquote>‚ÄúAllƒÅhu Akbar‚Ä¶!‚Äù</blockquote>
        <p>Uqbah bin NƒÅfi‚Äò gugur sebagai syahid, meninggalkan jejak sejarah yang abadi.</p>

        <hr>

        <h3>üåü Warisan Abadi</h3>
        <div class="aside">
          <strong>Dari perjuangannya lahirlah:</strong>
          <ul>
            <li>Kota QairawƒÅn, mercusuar Islam di Afrika Utara.</li>
            <li>Jalan terbuka menuju Maroko dan Andalus.</li>
            <li>Kisah keberanian seorang panglima yang hidup untuk jihad dan wafat dalam syahadah.</li>
            <li>Nama yang dikenang sebagai FƒÅti·∏• Ifriqiyah, pengikat fut≈´hƒÅt dari Mesir hingga samudra.</li>
          </ul>
        </div>

        <div class="share" aria-label="Bagikan artikel">
          <a class="btn" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Ffrijal.github.io%2Fartikel%2Fuqbah-bin-nafi.html&text=Kisah%20Uqbah%20bin%20N%C4%81fi%E2%80%98%20%E2%80%94%20pendiri%20Qairaw%C4%81n%20%26%20F%C4%81ti%E1%B8%A5%20Ifriqiyah"
             target="_blank" rel="noopener noreferrer">üê¶ Twitter</a>
          <a class="btn" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ffrijal.github.io%2Fartikel%2Fuqbah-bin-nafi.html"
             target="_blank" rel="noopener noreferrer">üìò Facebook</a>
          <a class="btn" href="https://api.whatsapp.com/send?text=Kisah%20Uqbah%20bin%20N%C4%81fi%E2%80%98%20%E2%80%94%20https%3A%2F%2Ffrijal.github.io%2Fartikel%2Fuqbah-bin-nafi.html"
             target="_blank" rel="noopener noreferrer">üü¢ WhatsApp</a>
          <button class="btn" id="copy-link">üîó Salin Link</button>
        </div>

        <div class="comments">
          <div id="fb-root"></div>
          <div class="fb-comments"
               data-href="https://frijal.github.io/artikel/uqbah-bin-nafi.html"
               data-width="100%"
               data-numposts="6"
               data-colorscheme="dark"></div>
        </div>

        <div></div>
          <h3>Artikel terkait</h3>
          <ul id="related-posts-list"></ul>
        </div>
      </article>

      <!-- Lightbox -->
      <div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
        <div class="inner">
          <img id="lightbox-img" alt="">
          <div class="caption" id="lightbox-caption"></div>
          <div class="nav">
            <button class="btn" id="prev">‚óÄÔ∏è Sebelumnya</button>
            <button class="btn" id="next">‚ñ∂Ô∏è Berikutnya</button>
            <button class="btn" id="close">‚ùå Tutup</button>
          </div>
        </div>
      </div>
    </main>

    <footer class="site">
      <p>¬© 2025 Frijal. Ditulis santai, dengan niat baik berbagi pengetahuan.</p>
    </footer>
  </div>

  <!-- Facebook SDK -->
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/id_ID/sdk.js#xfbml=1&version=v18.0"></script>

  <!-- Deteksi Browser/OS + Lokasi IP -->
  <script>
    (function() {
      const envText = document.getElementById('env-text');
      const ipText = document.getElementById('ip-text');

      function parseUA() {
        const ua = navigator.userAgent;
        let os = 'OS tidak diketahui';
        if (/Windows NT/.test(ua)) os = 'Windows';
        else if (/Mac OS X/.test(ua)) os = 'macOS';
        else if (/Android/.test(ua)) os = 'Android';
        else if (/iPhone|iPad|iPod/.test(ua)) os = 'iOS';
        else if (/Linux/.test(ua)) os = 'Linux';

        let browser = 'Browser tidak diketahui';
        if (/Edg\//.test(ua)) browser = 'Microsoft Edge';
        else if (/Chrome\//.test(ua)) browser = 'Chrome';
        else if (/Safari\//.test(ua) && !/Chrome\//.test(ua)) browser = 'Safari';
        else if (/Firefox\//.test(ua)) browser = 'Firefox';

        envText.textContent = browser + ' di ' + os;
      }

      async function fetchIP() {
        try {
          const r = await fetch('https://ipapi.co/json/');
          if (!r.ok) throw new Error('fail');
          const j = await r.json();
          const city = j.city || 'Kota tidak diketahui';
          const country = j.country_name || 'Negara';
          const cc = (j.country_code || '').toLowerCase();
          const flag = cc ? `https://flagcdn.com/24x18/${cc}.png` : '';
          ipText.innerHTML = (flag ? `<img src="${flag}" alt="${country}" style="vertical-align:middle;margin-right:6px;border:1px solid #223;"/>` : '') +
                             `${city}, ${country}`;
        } catch(e) {
          ipText.textContent = 'Lokasi IP tidak tersedia';
        }
      }

      parseUA();
      fetchIP();
    })();
  </script>

  <!-- Lightbox & Share -->
  <script>
    (function() {
      const gallery = Array.from(document.querySelectorAll('#gallery img'));
      const lb = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightbox-img');
      const lbCap = document.getElementById('lightbox-caption');
      const btnPrev = document.getElementById('prev');
      const btnNext = document.getElementById('next');
      const btnClose = document.getElementById('close');
      let idx = 0;

      function open(i) {
        idx = i;
        const el = gallery[idx];
        lbImg.src = el.src;
        lbImg.alt = el.alt || '';
        lbCap.textContent = el.dataset.caption || '';
        lb.classList.add('active');
      }
      function close() { lb.classList.remove('active'); }
      function prev() { open((idx - 1 + gallery.length) % gallery.length); }
      function next() { open((idx + 1) % gallery.length); }

      gallery.forEach((img, i) => img.addEventListener('click', () => open(i)));
      btnPrev.addEventListener('click', prev);
      btnNext.addEventListener('click', next);
      btnClose.addEventListener('click', close);
      lb.addEventListener('click', (e) => { if (e.target === lb) close(); });

      // Keyboard nav
      document.addEventListener('keydown', (e) => {
        if (!lb.classList.contains('active')) return;
        if (e.key === 'ArrowLeft') prev();
        if (e.key === 'ArrowRight') next();
        if (e.key === 'Escape') close();
      });

      // Copy share link
      const copyBtn = document.getElementById('copy-link');
      copyBtn.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(location.href);
          copyBtn.textContent = '‚úÖ Tersalin!';
          setTimeout(() => copyBtn.textContent = 'üîó Salin Link', 1500);
        } catch(e) {
          alert('Gagal menyalin link');
        }
      });
    })();
  </script>

  <!-- Related posts (WAJIB tepat sebelum penutup body) -->
  
  <div></div>
<div></div>
<section id="related-marquee-section"><div id="related-marquee-container"></div></section><script src="/ext/marquee-url.js"></script>
</body>
</html>
