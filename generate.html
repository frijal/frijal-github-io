<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generate artikel.json</title>
<style>
body { font-family: Arial; padding:20px; background:#f9f9f9; }
h1 { color:#007BFF; }
textarea { width:100%; height:400px; font-family: monospace; margin-top:10px; }
button { padding:10px 20px; font-size:16px; margin-top:10px; cursor:pointer; }
</style>
</head>
<body>

<h1>Generate artikel.json</h1>
<p>Semua file di <code>/artikel/list.txt</code> akan diproses.</p>
<button id="generateBtn">Generate JSON</button>
<h2>Hasil JSON:</h2>
<textarea id="result" readonly></textarea>

<script>
// --- Tentukan kategori berdasarkan judul ---
function titleToCategory(title){
  const t = title.toLowerCase();
  const cats = [
    {name:"Arch", k:["manjaro", "cachy", "arch", "endeavouros", "artix", "parabola", "blackarch", "garuda"]},
    {name:"Debian", k:["debian", "ubuntu", "mint", "mx", "elementary", "puppy", "kali", "kubuntu", "xubuntu", "lubuntu", "zorin", "popos", "deepin", "tails"]},
    {name:"Desktop", k:["kde", "hyperland", "caja", "ukui", "pantheon", "deepin", "lxde", "budgie", "mate", "gnome", "cinnamon", "xfce", "desktop", "fluxbox", "openbox", "i3", "sway", "awesome", "dwm", "enlightenment"]},
    {name:"Kehidupan", k:["hidup", "uang", "dosa", "alasan", "bapak", "ibu", "anak", "kehidupan", "tidur", "sahabat", "teman", "sombong", "wanita", "pria", "perempuan", "laki", "silaturahim", "daily", "rutinitas", "bahagia", "sedih", "cinta", "emosi", "keluarga", "sosial", "masalah"]},
    {name:"Kerja", k:["kerja", "kantor", "dokumen", "strategi", "pdf", "psikotes", "karir", "bisnis", "proyek", "meeting", "wawancara", "resign", "gaji", "promosi", "lembur", "freelance", "startup"]},
    {name:"Kuliner", k:["resep", "makan", "minum", "bumbu", "kuliner", "masak", "restoran", "kafe", "jajanan", "sarapan", "makan siang", "makan malam", "diet"]},
    {name:"Multimedia", k:["video", "foto", "audio", "film", "ffmpeg", "imagemagick", "photoshop", "gimp", "audacity", "blender", "premiere", "davinci", "lightroom", "kdenlive", "shotcut"]},
    {name:"NixOS", k:["nixos","nix"]},
    {name:"OpenSUSE", k:["opensuse", "suse", "leap", "tumbleweed"]},
    {name:"OS Linux", k:["grub", "autoremove", "cron", "reinstall", "dd", "troubleshooting", "skrip", "rsync", "system", "sudo", "backup", "plugin", "ssh", "symlinks", "mount", "samba", "linux", "bootloader", "distro", "release", "rilis", "kernel", "cli", "shell", "bash", "zsh", "systemd", "init", "pacman", "yay", "apt-get", "dpkg", "yum", "dnf", "zypper", "aptitude"]},
    {name:"OS Windows", k:["windows", "windows10", "windows11", "powershell", "cmd", "registry", "boot", "update"]},
    {name:"Redhat", k:["fedora", "centos", "redhat", "rhel", "scientific linux", "alma", "rocky"]},
    {name:"Religi", k:["allah", "shalat", "sholat", "agama", "puasa", "nabi", "islam", "madinah", "religi", "ghibah", "muslim", "quran", "hadits", "dakwah", "doa", "surga", "neraka", "masjid"]},
    {name:"Repository", k:["repository", "dnf", "apt", "repo", "snap", "synaptic", "octopi", "flatpak", "netselect", "mirror", "reflector", "aur", "ppa", "github", "gitlab", "bitbucket", "dockerhub"]},
    {name:"Slackware", k:["slackware", "slac", "sbopkg"]},
    {name:"Jaringan", k:["jaringan", "internet", "wifi", "router", "modem", "ethernet", "ip", "dns", "firewall", "tcp", "udp", "http", "https", "proxy", "vpn", "port"]},
    {name:"Pemrograman", k:["pemrograman", "program", "coding", "javascript", "python", "php", "java", "c++", "c", "html", "css", "database", "sql", "mysql", "mongodb", "framework", "library", "api", "bug", "compiler", "debugging"]},
    {name:"Perangkat Keras", k:["perangkat keras", "hardware", "cpu", "gpu", "ram", "hardisk", "ssd", "motherboard", "power supply", "monitor", "keyboard", "mouse", "printer", "usb", "driver"]},
    {name:"Keuangan", k:["keuangan", "investasi", "saham", "crypto", "bitcoin", "uang", "bank", "tabungan", "kredit", "pinjaman", "pajak", "anggaran", "ekonomi"]}
  ];
  return (cats.find(c=>c.k.some(k=>t.includes(k)))||{name:"Lainnya"}).name;
}
// --- Generate JSON utama ---
document.getElementById("generateBtn").addEventListener("click", async ()=>{
  const result = [];

  try{
    const listRes = await fetch("artikel/list.txt");
    const text = await listRes.text();
    const files = text.trim().split(/\n/).map(f=>f.trim()).filter(f=>f);

    for(const f of files){
      try{
        const res = await fetch("artikel/"+f);
        const html = await res.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(html,"text/html");
        const title = doc.querySelector("title")?.innerText || f;
        const category = titleToCategory(title);

        result.push({
          title,
          file:f,
          category
        });

      } catch(e){
        console.warn("Gagal fetch:", f);
        result.push({
          title:f,
          file:f,
          category:"Lainnya"
        });
      }
    }

    document.getElementById("result").value = JSON.stringify(result,null,2);
  } catch(err){
    alert("Gagal membaca list.txt: "+err);
  }
});
</script>
  
</body>
</html>
