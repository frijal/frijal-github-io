<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <!-- prettier-ignore -->
<title>Queen Anne‚Äôs Revenge: La Concorde, Blackbeard, dan kisah yang berbalik nasib</title>
  <link rel="icon" href="https://frijal.github.io/favicon.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Kisah La Concorde yang direbut Blackbeard lalu menjadi Queen Anne‚Äôs Revenge. Dari tragedi perdagangan budak ke legenda bajak laut.">
  <meta name="author" content="Frijal">
  <meta name="robots" content="index, follow">
  <meta name="keywords" content="La Concorde, Blackbeard, Queen Anne‚Äôs Revenge, bajak laut, Karibia, sejarah maritim, perdagangan budak">
  <link rel="canonical" href="https://frijal.github.io/artikel/queen-annes-revenge.html">

  <!-- Open Graph -->
  <meta property="og:title" content="Queen Anne‚Äôs Revenge: La Concorde, Blackbeard, dan kisah yang berbalik nasib">
  <meta property="og:description" content="Dari kapal dagang budak ke kapal perang legendaris: peralihan nasib yang melahirkan salah satu kisah paling menakjubkan dalam sejarah perompakan.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://frijal.github.io/artikel/queen-annes-revenge.html">
  <meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjiY3ksXIHpzt-yBzIxp3kKyI1-z0BudgsyfW7TKC3-1PUY4S9yiZtkjxUb7Ny7-qnSM4QP6VPXmv7znA2HWkPUaJOW22y-F_-TVqp4-otHwMNDVWIg6HB5hBd-8_rnkK-M5Iq6Ufw3tzoX7FtkmbRg1gq9LWi17XSJGxqYujAYb-3ZDjbX16eEOmWDdSc/s1600/budak.jpg">
  <meta property="og:site_name" content="Frijal">
  <meta property="og:locale" content="id_ID">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Queen Anne‚Äôs Revenge: La Concorde, Blackbeard, dan kisah yang berbalik nasib">
  <meta name="twitter:description" content="Dari kapal dagang budak ke kapal perang legendaris: peralihan nasib yang melahirkan salah satu kisah paling menakjubkan dalam sejarah perompakan.">
  <meta name="twitter:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjiY3ksXIHpzt-yBzIxp3kKyI1-z0BudgsyfW7TKC3-1PUY4S9yiZtkjxUb7Ny7-qnSM4QP6VPXmv7znA2HWkPUaJOW22y-F_-TVqp4-otHwMNDVWIg6HB5hBd-8_rnkK-M5Iq6Ufw3tzoX7FtkmbRg1gq9LWi17XSJGxqYujAYb-3ZDjbX16eEOmWDdSc/s1600/budak.jpg">

  <!-- Theme color -->
  <meta name="theme-color" content="#0f172a">

  <!-- JSON-LD structured data -->
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"NewsArticle","headline":"Queen Anne‚Äôs Revenge: La Concorde, Blackbeard, dan kisah yang berbalik nasib","description":"Kisah La Concorde yang direbut Blackbeard lalu menjadi Queen Anne‚Äôs Revenge. Dari tragedi perdagangan budak ke legenda bajak laut.","image":["https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjiY3ksXIHpzt-yBzIxp3kKyI1-z0BudgsyfW7TKC3-1PUY4S9yiZtkjxUb7Ny7-qnSM4QP6VPXmv7znA2HWkPUaJOW22y-F_-TVqp4-otHwMNDVWIg6HB5hBd-8_rnkK-M5Iq6Ufw3tzoX7FtkmbRg1gq9LWi17XSJGxqYujAYb-3ZDjbX16eEOmWDdSc/s1600/budak.jpg"],"datePublished":"2025-09-24","dateModified":"2025-09-24","author":{"@type":"Person","name":"Frijal","url":"https://frijal.github.io/","image":"https://frijal.github.io/artikel/queen-annes-revenge.jpg"},"publisher":{"@type":"Organization","name":"Frijal","logo":{"@type":"ImageObject","url":"https://frijal.github.io/logo.png","image":"https://frijal.github.io/artikel/queen-annes-revenge.jpg"},"image":"https://frijal.github.io/artikel/queen-annes-revenge.jpg"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://frijal.github.io/artikel/queen-annes-revenge.html","image":"https://frijal.github.io/artikel/queen-annes-revenge.jpg"},"articleSection":"Sejarah Maritim"}</script>

  <!-- External related posts stylesheet (placed right after title, as requested) -->
  <div></div>

  <style>
    :root{
      --bg:#0b1220;
      --card:#111831;
      --accent:#ffc857;
      --accent-2:#6ee7ff;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --link:#ffd56b;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:16px;
      --maxw:860px;
    }
    html,body{
      margin:0;
      padding:0;
      background: radial-gradient(1200px 600px at 20% 10%, #0e1730 0%, #0b1220 40%, #070c16 100%);
      color:var(--text);
      font:16px/1.6 "Inter", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      min-height:100%;
    }
    /* Wide fullscreen, single column */
    .wrap{
      max-width:var(--maxw);
      margin:0 auto;
      padding:clamp(18px, 2.8vw, 28px);
    }
    header.site{
      position:relative;
      margin:24px auto 16px;
      padding:24px;
      border-radius:var(--radius);
      background:linear-gradient(135deg, rgba(255,200,87,.1), rgba(110,231,255,.06));
      border:1px solid rgba(255,200,87,.25);
      box-shadow:var(--shadow);
      backdrop-filter:saturate(140%) blur(6px);
    }
    header.site h1{
      margin:0 0 8px;
      font-size:clamp(22px, 3.2vw, 34px);
      letter-spacing:.2px;
    }
    header.site p.sub{
      margin:0;
      color:var(--muted);
    }
    nav.meta{
      display:flex;
      gap:14px;
      flex-wrap:wrap;
      margin-top:12px;
      font-size:.95rem;
      color:var(--muted);
    }
    nav.meta span{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(17,24,49,.35);
      border:1px solid rgba(255,255,255,.08);
    }

    article.post{
      margin:24px auto;
      background:linear-gradient(180deg, rgba(17,24,49,.6), rgba(17,24,49,.4));
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .hero{
      position:relative;
      aspect-ratio:16/7;
      min-height:220px;
      background:url("https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjiY3ksXIHpzt-yBzIxp3kKyI1-z0BudgsyfW7TKC3-1PUY4S9yiZtkjxUb7Ny7-qnSM4QP6VPXmv7znA2HWkPUaJOW22y-F_-TVqp4-otHwMNDVWIg6HB5hBd-8_rnkK-M5Iq6Ufw3tzoX7FtkmbRg1gq9LWi17XSJGxqYujAYb-3ZDjbX16eEOmWDdSc/s1600/budak.jpg") center/cover no-repeat;
      filter:saturate(110%) contrast(105%);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .hero::after{
      content:"";
      position:absolute; inset:0;
      background:linear-gradient(180deg, rgba(11,18,32,.2), rgba(11,18,32,.5) 70%, rgba(11,18,32,.9));
    }
    .hero-caption{
      position:absolute; bottom:12px; left:12px; right:12px;
      color:var(--text);
      font-size:.95rem;
      text-shadow:0 2px 8px rgba(0,0,0,.6);
    }
    .content{
      padding:clamp(16px, 2.4vw, 26px);
    }
    .content p{
      margin:0 0 1em;
      font-size:1.02rem;
    }
    .content a{ color:var(--link); text-decoration:none; }
    .content a:hover{ text-decoration:underline; }

    /* Blockquote hook */
    .hook{
      margin:18px 0;
      padding:16px 18px;
      border-left:4px solid var(--accent);
      background:rgba(255,200,87,.08);
      border-radius:8px;
      color:#ffe9b5;
    }

    /* Gallery */
    .gallery{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap:10px;
      margin:20px 0;
    }
    @media (max-width:840px){
      .gallery{ grid-template-columns:repeat(2, 1fr); }
    }
    @media (max-width:560px){
      .gallery{ grid-template-columns:1fr; }
    }
    figure{
      margin:0;
      position:relative;
      overflow:hidden;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.08);
      background:rgba(255,255,255,.03);
      cursor:zoom-in;
    }
    figure img{
      display:block;
      width:100%; height:auto;
      aspect-ratio:4/3;
      object-fit:cover;
      transition:transform .5s ease, filter .35s ease;
      filter:saturate(108%) contrast(104%);
    }
    figure:hover img{ transform:scale(1.05); }
    figcaption{
      position:absolute; left:8px; bottom:8px; right:8px;
      padding:6px 8px;
      border-radius:8px;
      font-size:.88rem;
      color:#e7f9ff;
      background:linear-gradient(180deg, rgba(14,22,40,.55), rgba(14,22,40,.8));
      backdrop-filter:blur(4px);
    }

    /* Lightbox */
    .lightbox{
      position:fixed; inset:0;
      background:rgba(2,6,12,.85);
      display:none;
      align-items:center; justify-content:center;
      z-index:9999;
    }
    .lightbox.open{ display:flex; }
    .lightbox img{
      max-width:min(92vw, 1200px);
      max-height:80vh;
      border-radius:12px;
      box-shadow:0 20px 50px rgba(0,0,0,.5);
    }
    .lightbox .nav{
      position:fixed; inset:auto 0 6vh 0;
      display:flex; align-items:center; justify-content:center; gap:18px;
    }
    .lb-btn{
      background:rgba(255,255,255,.08);
      color:#fff;
      border:1px solid rgba(255,255,255,.16);
      border-radius:999px;
      padding:10px 14px;
      cursor:pointer;
      font-size:16px;
    }
    .lb-btn:hover{ background:rgba(255,255,255,.16); }
    .lb-close{
      position:fixed; top:16px; right:16px;
      padding:10px 12px; border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(255,255,255,.08); color:#fff; cursor:pointer;
    }

    /* Share bar */
    .share{
      display:flex; gap:12px; flex-wrap:wrap;
      margin:18px 0;
    }
    .share a{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(17,24,49,.35);
      color:var(--text); text-decoration:none;
      transition:transform .05s ease, background .2s ease;
    }
    .share a:hover{ background:rgba(17,24,49,.5); transform:translateY(-1px); }

    /* Footer info */
    footer.site{
      margin:24px auto 80px;
      padding:16px 20px;
      border-radius:var(--radius);
      background:linear-gradient(135deg, rgba(110,231,255,.08), rgba(255,200,87,.08));
      border:1px solid rgba(255,255,255,.08);
      box-shadow:var(--shadow);
    }
    .sys-info{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    @media (max-width:680px){ .sys-info{ grid-template-columns:1fr; } }
    .badge{
      display:flex; align-items:center; gap:8px;
      padding:8px 10px; border-radius:10px;
      background:rgba(17,24,49,.35); border:1px solid rgba(255,255,255,.08);
    }
    .badge img.flag{ width:22px; height:22px; border-radius:5px; box-shadow:0 0 0 1px rgba(255,255,255,.15); }

    /* Floating sitemap/home buttons */
    .btn-sitemap{
      position:fixed; left:18px; top:30%;
      transform:translateY(-50%);
      z-index:9998;
    }
    .btn-home{
      position:fixed; right:18px; bottom:20%;
      transform:translateY(50%);
      z-index:9998;
    }
    .float-btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 14px; border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:linear-gradient(135deg, rgba(255,200,87,.18), rgba(110,231,255,.14));
      color:#fff; text-decoration:none;
      box-shadow:var(--shadow);
      backdrop-filter:saturate(140%) blur(4px);
    }
    .float-btn:hover{ filter:saturate(115%); }

    /* Facebook comments section */
    .comments{
      margin-top:24px;
      padding:16px;
      border-radius:12px;
      background:rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.08);
    }

    /* Related posts toggle */
    #related-posts-toggle{
      position:fixed;
      left:12px; bottom:12px;
      z-index:9999;
      padding:8px 10px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(255,255,255,.08);
      color:#fff;
      cursor:pointer;
    }
    #related-posts-container{
      position:fixed;
      left:12px; bottom:54px;
      width:280px; max-height:50vh; overflow:auto;
      display:none;
      padding:10px;
      border-radius:12px;
      background:rgba(11,18,32,.92);
      border:1px solid rgba(255,255,255,.12);
      box-shadow:var(--shadow);
    }
    #related-posts-container.open{ display:block; }
    #related-posts-list{
      list-style:none; margin:0; padding:0;
    }
    #related-posts-list li a{
      display:block; padding:8px 6px;
      color:#dbeafe; text-decoration:none;
      border-radius:8px;
    }
    #related-posts-list li a:hover{ background:rgba(255,255,255,.06); }
  </style>
<meta name="date" content="2025-09-28">

  <meta property="og:image:alt" content="Queen Anne‚Äôs Revenge: La Concorde, Blackbeard, dan kisah yang berbalik nasib">
  <meta itemprop="image" content="https://frijal.github.io/artikel/queen-annes-revenge.jpg">
<link rel="stylesheet" href="/ext/marquee-url.css">
<meta property="article:published_time" content="2025-09-24T11:00:00+08:00"></head>
<body>
  <div class="wrap">
    <header class="site">
      <h1>Queen Anne‚Äôs Revenge: La Concorde, Blackbeard, dan kisah yang berbalik nasib</h1>
      <p class="sub">Dari pelabuhan Afrika Barat ke Karibia: tragedi, perlawanan, dan lahirnya legenda.</p>
      <nav class="meta" aria-label="Meta informasi">
        <span>üìÖ <time datetime="1717-11">November 1717</time></span>
        <span>üìç Martinique, Karibia</span>
        <span>üß≠ Zaman Keemasan Perompakan</span>
      </nav>
    </header>

    <article class="post">
      <div class="hero" role="img" aria-label="Ilustrasi kapal dagang budak di era maritim Karibia">
        <div class="hero-caption">La Concorde direbut, takdir berbalik: lahirnya Queen Anne‚Äôs Revenge.</div>
      </div>
      <div class="content">
        <p>Pada November 1717, kapal dagang budak Prancis <em>La Concorde</em> berangkat dari pantai Afrika Barat menuju Karibia, membawa ratusan orang Afrika yang diperbudak. Namun perjalanan itu berubah menjadi tragedi sejak awal, ketika penyakit, kematian, dan keputusasaan merenggut banyak nyawa, sebelum takdir mengambil alih. Dekat pulau Martinique, kapal itu dicegat oleh seorang bajak laut legendaris bernama Edward Teach, yang lebih dikenal dunia dengan julukan: Blackbeard (Si Janggut Hitam).</p>

        <figure>
          <img loading="lazy" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjiY3ksXIHpzt-yBzIxp3kKyI1-z0BudgsyfW7TKC3-1PUY4S9yiZtkjxUb7Ny7-qnSM4QP6VPXmv7znA2HWkPUaJOW22y-F_-TVqp4-otHwMNDVWIg6HB5hBd-8_rnkK-M5Iq6Ufw3tzoX7FtkmbRg1gq9LWi17XSJGxqYujAYb-3ZDjbX16eEOmWDdSc/s1600/budak.jpg" alt="Ilustrasi perdagangan budak dan kapal maritim" />
          <figcaption>Bayang-bayang perdagangan manusia yang pekat di lintasan Karibia.</figcaption>
        </figure>

        <p>Kru kapal yang kelelahan dan hancur semangatnya tidak memberikan perlawanan berarti, sehingga kapal jatuh ke tangan Blackbeard dengan mudah. Namun ia tidak melanjutkan jalannya dalam perdagangan manusia, melainkan membalikkan nasib kapal itu sepenuhnya. Ia melengkapinya kembali secara total dan mengubahnya menjadi kapal perang yang dahsyat, menamainya <strong>Queen Anne‚Äôs Revenge</strong> (Balas Dendam Ratu Anne). Kapal itu menjadi permata armadanya sekaligus salah satu kapal terkuat yang mengarungi Karibia, dengan meriam-meriamnya yang berkilauan dan menghadirkan teror di setiap pelabuhan.</p>

        <p>Beberapa catatan sezaman menyebutkan bahwa banyak orang Afrika di dalam kapal memperoleh kebebasan mereka, sementara sebagian lainnya ‚Äì terutama yang memiliki keterampilan atau pengalaman pelayaran ‚Äì memilih bergabung dengan krunya. Pada masa ketika masyarakat sangat terikat diskriminasi dan perbedaan kelas, kapal-kapal bajak laut dikenal dengan semacam <em>kesetaraan keras</em>, di mana harta rampasan dibagi rata tanpa memandang asal-usul atau warna kulit, meskipun kehidupan laut tetap penuh risiko dan kekerasan.</p>

        <div class="hook">
          Sejarah bukan sekadar daftar peristiwa‚Äîia adalah denyut manusia yang mencari makna dan peluang di tengah badai.
        </div>

        <p>Perebutan La Concorde bukanlah sekadar rampasan biasa, melainkan peristiwa yang mengangkat Blackbeard ke derajat legenda. Kapal yang lahir dari penderitaan manusia itu berubah menjadi kapal bajak laut terbesar pada zamannya, sehingga lahirlah salah satu kisah paling menakjubkan dari zaman keemasan perompakan.</p>

        <p style="color:#bcd7ff">Tambahan konteks santai: Bayangkan deru angin, suara tali-temali, dan gemuruh meriam‚ÄîQueen Anne‚Äôs Revenge bukan cuma kapal; ia panggung besar di mana nasib manusia ditulis ulang. Di atas geladaknya, mereka yang semula dijerat rantai menemukan celah untuk memilih, meski harga kebebasan di laut selalu dibayar dengan keberanian.</p>

        <!-- Galeri foto (lazy-load) -->
        <section aria-label="Galeri foto" class="gallery">
          <figure>
            <img loading="lazy" src="https://images.unsplash.com/photo-1505839673365-e3971f8d6a30?q=80&w=1200&auto=format&fit=crop" alt="Laut Karibia di senja hari">
            <figcaption>Senja Karibia‚Äîlangit membara, laut berdenyut.</figcaption>
          </figure>
          <figure>
            <img loading="lazy" src="https://images.unsplash.com/photo-1518199266791-5375a83190b1?q=80&w=1200&auto=format&fit=crop" alt="Tali-temali dan layar kapal">
            <figcaption>Tali-temali: syaraf kapal yang selalu tegang.</figcaption>
          </figure>
          <figure>
            <img loading="lazy" src="https://images.unsplash.com/photo-1459292414180-1e4ee09b29e8?q=80&w=1200&auto=format&fit=crop" alt="Meriam kapal tua">
            <figcaption>Meriam tua‚Äîsuara sejarah yang menggema.</figcaption>
          </figure>
        </section>

        <!-- Share -->
        <div class="share" aria-label="Bagikan artikel">
          <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Ffrijal.github.io%2Fartikel%2Fqueen-annes-revenge.html&text=Kisah%20Queen%20Anne%E2%80%99s%20Revenge%3A%20dari%20La%20Concorde%20ke%20legenda%20Blackbeard" rel="noreferrer">üê¶ Bagikan ke Twitter</a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ffrijal.github.io%2Fartikel%2Fqueen-annes-revenge.html" rel="noreferrer">üìò Bagikan ke Facebook</a>
          <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ffrijal.github.io%2Fartikel%2Fqueen-annes-revenge.html" rel="noreferrer">üîó Bagikan ke LinkedIn</a>
          <a href="https://wa.me/?text=Kisah%20Queen%20Anne%E2%80%99s%20Revenge%20https%3A%2F%2Ffrijal.github.io%2Fartikel%2Fqueen-annes-revenge.html" rel="noreferrer">üí¨ Kirim via WhatsApp</a>
        </div>

        <!-- Facebook Comments -->
        <div class="comments">
          <div id="fb-root"></div>
          <div class="fb-comments" data-href="https://frijal.github.io/artikel/queen-annes-revenge.html" data-width="100%" data-numposts="5"></div>
        </div>
      </div>
    </article>

    <footer class="site">
      <h3 style="margin:0 0 8px;">Info sistem & lokasi</h3>
      <div class="sys-info" aria-label="Informasi sistem pengguna">
        <div class="badge"><span>üß©</span><div><strong>Browser:</strong> <span id="br"></span></div></div>
        <div class="badge"><span>üíª</span><div><strong>OS:</strong> <span id="os"></span></div></div>
        <div class="badge"><img class="flag" id="flag" alt="Bendera negara"><div><strong>Kota & IP:</strong> <span id="city"></span> ¬∑ <span id="ip"></span></div></div>
        <div class="badge"><span>üåç</span><div><strong>Negara:</strong> <span id="country"></span></div></div>
      </div>
    </footer>
  </div>

  <!-- Floating buttons -->
  <div class="btn-sitemap">
    <a class="float-btn" href="https://frijal.github.io/sitemap.html" aria-label="Buka sitemap">üó∫Ô∏è Sitemap</a>
  </div>
  <div class="btn-home">
    <a class="float-btn" href="https://frijal.github.io/artikel.html" aria-label="Kembali ke beranda artikel">üè† Home</a>
  </div>

  <!-- Lightbox modal -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
    <button class="lb-close" id="lbClose" aria-label="Tutup">‚úï</button>
    <img id="lbImg" alt="">
    <div class="nav">
      <button class="lb-btn" id="lbPrev" aria-label="Sebelumnya">‚óÄÔ∏é</button>
      <button class="lb-btn" id="lbNext" aria-label="Berikutnya">‚ñ∂Ô∏é</button>
    </div>
  </div>

  <!-- Facebook SDK -->
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/id_ID/sdk.js#xfbml=1&version=v20.0"></script>

  <script>
    // Basic UA parsing for browser/OS
    (function(){
      const ua = navigator.userAgent;
      const brMap = [
        {name:"Edge", re:/Edg/i},
        {name:"Chrome", re:/Chrome|CriOS/i},
        {name:"Firefox", re:/Firefox/i},
        {name:"Safari", re:/Safari/i},
        {name:"Opera", re:/OPR|Opera/i}
      ];
      const osMap = [
        {name:"Windows", re:/Windows NT/i},
        {name:"macOS", re:/Mac OS X|Macintosh/i},
        {name:"Linux", re:/Linux/i},
        {name:"Android", re:/Android/i},
        {name:"iOS", re:/iPhone|iPad|iPod/i}
      ];
      const br = (brMap.find(b=>b.re.test(ua))||{name:"Browser tak dikenal"}).name;
      const os = (osMap.find(o=>o.re.test(ua))||{name:"OS tak dikenal"}).name;
      document.getElementById('br').textContent = br;
      document.getElementById('os').textContent = os;
    })();

    // IP geolocation (city/country/IP + flag)
    (function(){
      const cityEl = document.getElementById('city');
      const ipEl = document.getElementById('ip');
      const countryEl = document.getElementById('country');
      const flagEl = document.getElementById('flag');

      fetch('https://ipapi.co/json/')
        .then(r=>r.json())
        .then(d=>{
          cityEl.textContent = d.city || 'Kota tidak diketahui';
          ipEl.textContent = d.ip || '‚Äî';
          countryEl.textContent = (d.country_name || 'Negara tidak diketahui') + (d.region ? ' ('+d.region+')' : '');
          const cc = (d.country_code || 'XX').toLowerCase();
          flagEl.src = 'https://flagcdn.com/w40/'+cc+'.png';
          flagEl.alt = 'Bendera '+(d.country_name||'unknown');
        })
        .catch(()=>{
          cityEl.textContent = 'Gagal memuat';
          ipEl.textContent = '‚Äî';
          countryEl.textContent = '‚Äî';
          flagEl.src = '';
          flagEl.alt = '';
        });
    })();

    // Lightbox gallery
    (function(){
      const figures = Array.from(document.querySelectorAll('figure img'));
      const lb = document.getElementById('lightbox');
      const lbImg = document.getElementById('lbImg');
      const lbClose = document.getElementById('lbClose');
      const lbPrev = document.getElementById('lbPrev');
      const lbNext = document.getElementById('lbNext');
      let idx = 0;

      function open(i){
        idx = i;
        lbImg.src = figures[idx].src;
        lbImg.alt = figures[idx].alt || '';
        lb.classList.add('open');
      }
      function close(){ lb.classList.remove('open'); }
      function prev(){ open((idx-1+figures.length)%figures.length); }
      function next(){ open((idx+1)%figures.length); }

      figures.forEach((img,i)=>{
        img.addEventListener('click', ()=>open(i));
      });
      lbClose.addEventListener('click', close);
      lb.addEventListener('click', (e)=>{ if(e.target===lb) close(); });
      document.addEventListener('keydown', (e)=>{
        if(!lb.classList.contains('open')) return;
        if(e.key==='Escape') close();
        if(e.key==='ArrowLeft') prev();
        if(e.key==='ArrowRight') next();
      });
      lbPrev.addEventListener('click', prev);
      lbNext.addEventListener('click', next);
    })();

    // Related posts toggle
    (function(){
      const btn = document.getElementById('related-posts-toggle');
      const box = document.getElementById('related-posts-container');
      btn.addEventListener('click', ()=>{
        box.classList.toggle('open');
        btn.textContent = box.classList.contains('open') ? '‚¨áÔ∏è' : '‚ùå';
      });
    })();
  </script>

<section id="related-marquee-section"><div id="related-marquee-container"></div></section><script src="/ext/marquee-url.js"></script>
  <!-- Related posts UI (requested placement before <div class='search-floating-container'><input type='text' id='floatingSearchInput' placeholder='cari artikel...' autocomplete='off'><span id='floatingSearchClear' class='clear-button'></body>times;</span><div id='floatingSearchResults' class='floating-results-container'></div></div>
</body>) -->
  <div></div>
  <div></div>
    <ul id="related-posts-list"></ul>
  </div>
  <div></div>
<section id="related-marquee-section"><div id="related-marquee-container"></div></section><script src="/ext/marquee-url.js"></script>
<div class='search-floating-container'><input type='text' id='floatingSearchInput' placeholder='cari artikel...' autocomplete='off'><span id='floatingSearchClear' class='clear-button'></body>times;</span><div id='floatingSearchResults' class='floating-results-container'></div></div>
</body>
</html>
