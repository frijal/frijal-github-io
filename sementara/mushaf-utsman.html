<!DOCTYPE html>
<html lang="id">
<head>
  <!-- Primary SEO -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <!-- prettier-ignore -->
<title>Mushaf Utsman bin Affan: Kisah, Desain, dan Persebaran</title>
  <meta name="description" content="Ngulik Mushaf Utsman bin Affan: ukuran raksasa, gaya tulisan awal Hijriyah, sejarah penyalinan, plus galeri foto interaktif." />
  <link rel="canonical" href="https://frijal.github.io/artikel/mushaf-utsman.html" />

  <!-- Favicon (ganti sesuai asetmu) -->
  <link rel="icon" href="https://frijal.github.io/favicon.png" type="image/png" />

  <!-- Open Graph -->
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Mushaf Utsman bin Affan: Kisah, Desain, dan Persebaran" />
  <meta property="og:description" content="Ngulik Mushaf Utsman bin Affan: ukuran raksasa, gaya tulisan awal Hijriyah, sejarah penyalinan, plus galeri foto interaktif." />
  <meta property="og:site_name" content="frijal.github.io" />
  <meta property="og:locale" content="id_ID" />
  <meta property="og:url" content="https://frijal.github.io/artikel/mushaf-utsman.html" />
  <meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjqO49Ig6_Mw3477c9zsZhx47wpp9KOrNvsYV6hJMdOz5hPfRHVNR5sOpdi0eC5dPMMBOjQ1qKJyyPqCsByu84uHCdpIJ1-o_C8jg7zq3RFD0ZLswFy_yvTuSc2-khJgCYRU3cDsInh2Q3uAa494tcOL3DX63F2PBiW3bKo6WjhyphenhyphenWaUuqaq73fhk1Dt4ik/s1600/Mushaf-Utsman-bin-Affan.jpg" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Mushaf Utsman bin Affan: Kisah, Desain, dan Persebaran" />
  <meta name="twitter:description" content="Ngulik Mushaf Utsman bin Affan: ukuran raksasa, gaya tulisan awal Hijriyah, sejarah penyalinan, plus galeri foto interaktif." />
  <meta name="twitter:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjqO49Ig6_Mw3477c9zsZhx47wpp9KOrNvsYV6hJMdOz5hPfRHVNR5sOpdi0eC5dPMMBOjQ1qKJyyPqCsByu84uHCdpIJ1-o_C8jg7zq3RFD0ZLswFy_yvTuSc2-khJgCYRU3cDsInh2Q3uAa494tcOL3DX63F2PBiW3bKo6WjhyphenhyphenWaUuqaq73fhk1Dt4ik/s1600/Mushaf-Utsman-bin-Affan.jpg" />

  <!-- JSON-LD Article -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Article",
    "mainEntityOfPage":{"@type":"WebPage","@id":"https://frijal.github.io/artikel/mushaf-utsman.html"},
    "headline":"Mushaf Utsman bin Affan: Kisah, Desain, dan Persebaran",
    "description":"Ngulik Mushaf Utsman bin Affan: ukuran raksasa, gaya tulisan awal Hijriyah, sejarah penyalinan, plus galeri foto interaktif.",
    "image":["https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjqO49Ig6_Mw3477c9zsZhx47wpp9KOrNvsYV6hJMdOz5hPfRHVNR5sOpdi0eC5dPMMBOjQ1qKJyyPqCsByu84uHCdpIJ1-o_C8jg7zq3RFD0ZLswFy_yvTuSc2-khJgCYRU3cDsInh2Q3uAa494tcOL3DX63F2PBiW3bKo6WjhyphenhyphenWaUuqaq73fhk1Dt4ik/s1600/Mushaf-Utsman-bin-Affan.jpg"],
    "author":{"@type":"Person","name":"Fakhrul"},
    "publisher":{"@type":"Organization","name":"frijal.github.io","logo":{"@type":"ImageObject","url":"https://frijal.github.io/assets/logo.png"}},
    "datePublished":"2025-09-22",
    "dateModified":"2025-09-22"
  }
  </script>

  <!-- Styles: wide fullscreen + mobile-friendly + ceria -->
  <style>
    :root{
      --bg:#0b0f1a;
      --bg-2:#0f1424;
      --text:#eef2ff;
      --muted:#c7d2fe;
      --brand:#7c3aed;
      --brand-2:#06b6d4;
      --accent:#f59e0b;
      --ok:#34d399;
      --danger:#ef4444;
      --card:#121933e6;
      --ring: 2px solid #7c3aed55;
      --shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
      --radius:18px;
      color-scheme: dark;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
      background:
        radial-gradient(1200px 800px at 10% -10%, #1a1440 0%, transparent 60%),
        radial-gradient(1200px 800px at 110% 20%, #0b2a3a 0%, transparent 60%),
        radial-gradient(1000px 600px at 50% 120%, #2a1148 0%, transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg-2));
      color:var(--text);
      overflow-x:hidden;
    }
    header.hero{
      min-height:50svh;
      display:grid;
      place-items:center;
      text-align:center;
      padding:clamp(24px,2.5vw,40px);
      position:relative;
      isolation:isolate;
    }
    .blur-orb{
      position:absolute; inset:auto;
      width:min(45vw,520px); aspect-ratio:1/1;
      filter: blur(60px);
      opacity:.35; z-index:-1; border-radius:50%;
      background: conic-gradient(from 30deg, var(--brand), var(--brand-2), var(--accent), var(--ok), var(--brand));
      animation: float 18s ease-in-out infinite alternate;
    }
    .blur-orb:nth-child(1){top:-10%;left:-10%}
    .blur-orb:nth-child(2){bottom:-15%;right:-15%; animation-duration:22s}

    @keyframes float { to { transform: translate3d(10px,-8px,0) rotate(12deg) } }

    .hero h1{
      font-size: clamp(28px, 4.5vw, 56px);
      margin:0 0 10px;
      letter-spacing:.4px;
      background: linear-gradient(90deg, #fff, #c7d2fe, #a78bfa, #67e8f9);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .hero p{
      margin:6px auto 0;
      max-width:800px;
      color:var(--muted);
      font-size: clamp(14px, 1.8vw, 18px);
    }

    /* Layout */
    .container{
      width:min(1200px, 92vw);
      margin:0 auto;
    }
    main{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap: clamp(18px, 2vw, 28px);
      padding: 20px 0 60px;
    }
    @media (max-width: 980px){
      main{ grid-template-columns: 1fr; }
    }

    article, aside{
      background: var(--card);
      border: 1px solid #ffffff0f;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      padding: clamp(16px, 2vw, 24px);
    }

    article h2, article h3{
      margin: 12px 0 6px;
      letter-spacing:.2px;
    }
    .meta{
      display:flex; flex-wrap:wrap; gap:12px;
      color:#dbeafe; font-size:14px; opacity:.9
    }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      background: #ffffff12; border:1px solid #ffffff1a;
      padding:6px 10px; border-radius:999px;
    }
    .chip svg{ width:16px; height:16px }

    /* Stat cards */
    .stats{
      display:grid; grid-template-columns: repeat(4, 1fr);
      gap:14px; margin: 14px 0 8px;
    }
    @media (max-width:720px){ .stats{grid-template-columns: repeat(2,1fr)}}
    .card{
      background:#0f162f; border:1px solid #ffffff14; border-radius:14px;
      padding:14px; box-shadow: var(--shadow);
    }
    .card b{ font-size:13px; color:#c7d2fe }
    .card div{ font-size:22px }

    /* Gallery */
    .gallery{
      display:grid; grid-template-columns: repeat(3,1fr);
      gap:10px; margin: 12px 0 2px;
    }
    @media (max-width:900px){ .gallery{grid-template-columns: repeat(2,1fr)}}
    @media (max-width:520px){ .gallery{grid-template-columns: 1fr}}

    .thumb{
      position:relative; border-radius:14px; overflow:hidden; aspect-ratio: 16/10;
      background:#0b1229; border:1px solid #ffffff1a; cursor:zoom-in;
    }
    .thumb img{
      width:100%; height:100%; object-fit:cover; display:block;
      filter:saturate(1.1) contrast(1.03);
      transition: transform .5s ease, filter .5s ease;
      will-change: transform;
    }
    .thumb:hover img{ transform: scale(1.05); filter:saturate(1.2) contrast(1.06) }

    /* Lightbox */
    .lightbox{
      position:fixed; inset:0; background: rgba(6,10,22,.85);
      display:none; align-items:center; justify-content:center; z-index:60;
      backdrop-filter: blur(6px);
    }
    .lightbox.open{ display:flex }
    .lb-inner{
      width:min(96vw, 1200px); height:min(90vh, 820px);
      display:grid; grid-template-rows: auto 1fr auto; gap:10px;
    }
    .lb-toolbar{
      display:flex; justify-content:space-between; align-items:center; gap:8px;
      padding:6px 10px; background:#0e1533; border:1px solid #ffffff1a; border-radius:12px;
    }
    .lb-stage{
      position:relative; overflow:hidden; border-radius:12px; border:1px solid #ffffff1a;
      background:#070b19;
      display:grid; place-items:center;
    }
    .lb-stage img{ max-width:100%; max-height:100%; object-fit:contain }
    .lb-nav{
      position:absolute; inset:0; display:flex; align-items:center; justify-content:space-between; padding:0 8px;
    }
    .lb-btn{
      background:#0e1533; border:1px solid #ffffff22; color:#fff;
      width:44px; height:44px; border-radius:10px; display:grid; place-items:center;
      cursor:pointer; transition:transform .12s ease, background .15s ease;
    }
    .lb-btn:hover{ background:#182055; transform: translateY(-1px) }
    .lb-close{
      background:#0e1533; border:1px solid #ffffff22; color:#fff;
      width:40px; height:40px; border-radius:10px; cursor:pointer;
    }

    /* Social share */
    .share{
      display:flex; flex-wrap:wrap; gap:8px; margin-top:10px
    }
    .share a{
      display:inline-flex; align-items:center; gap:8px; padding:8px 12px;
      border-radius:999px; background:#0e1533; border:1px solid #ffffff20;
      color:#fff; text-decoration:none; font-size:14px
    }
    .share a:hover{ background:#182055 }

    /* Info panel */
    aside .info{
      display:grid; gap:10px;
    }
    .kvs{
      display:grid; grid-template-columns: 1fr; gap:8px;
    }
    .kvs .row{
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px; background:#0e1533; border:1px solid #ffffff1a; border-radius:12px;
    }
    .flag{ font-size:20px }

    /* Floating nav buttons */
    .nav-left, .nav-right{
      position:fixed; z-index:50;
      display:grid; place-items:center;
    }
    .nav-left{ left:10px; top:30% }
    .nav-right{ right:10px; bottom:30% }
    .fab{
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      border:1px solid #ffffff30; color:#fff;
      width:56px; height:56px; border-radius:14px;
      display:grid; place-items:center; box-shadow: var(--shadow);
      text-decoration:none; transition: transform .12s ease, filter .15s ease;
    }
    .fab:hover{ transform: translateY(-2px); filter: brightness(1.08) }

    /* Footer */
    footer{
      padding:40px 0 120px; text-align:center; color:#c7d2feaa; font-size:14px;
    }

    /* Focus */
    a,button{ outline:none }
    a:focus-visible,button:focus-visible{ box-shadow: 0 0 0 3px #7c3aed80 }

    /* Small niceties */
    .hr{ height:1px; background:linear-gradient(90deg, transparent, #ffffff1a, transparent); margin:16px 0 }
    .note{ color:#c7d2fe; background:#ffffff10; border:1px dashed #ffffff25; padding:8px 12px; border-radius:10px; font-size:14px }
  </style>
<meta name="date" content="2025-09-28">
<meta name="google-site-verification" content="9Jwla8V71mwNNZ4NNPThsK_BHpWn6quXWSs_VjPAflA" />
<link rel="stylesheet" href="/ext/related.css">
</head>
<body>

  <!-- Floating navigation buttons -->
  <div class="nav-left">
    <a class="fab" href="https://frijal.github.io/home.html" target="_blank" rel="noopener">
      <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1v-10.5z" stroke="white" stroke-width="1.4" stroke-linejoin="round"/>
      </svg>
    </a>
  </div>
  <div class="nav-right">
    <a class="fab" href="https://frijal.github.io/sitemap.html" target="_blank" rel="noopener">
      <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M10 3h4v4h-4V3zM4 17h6v4H4v-4zm10 0h6v4h-6v-4zM12 7v4M8 17v-6h8v6" stroke="white" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
  </div>

  <header class="hero">
    <div class="blur-orb"></div>
    <div class="blur-orb"></div>
    <div class="container">
      <h1>Mushaf Utsman bin Affan</h1>
      <p>Versi ringkas, hangat, dan visual tentang mushaf bersejarah: ukurannya fantastis, tulisannya khas awal Hijriyah, dan jejak persebarannya membentuk dunia Islam.</p>
      <div class="meta" style="margin-top:12px;">
        <span class="chip" title="Kategori">
          <svg viewBox="0 0 24 24" fill="none"><path d="M4 7a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v4.5a3 3 0 0 1-.879 2.121l-5.5 5.5A3 3 0 0 1 11.621 20H7a3 3 0 0 1-3-3V7z" stroke="#c7d2fe" stroke-width="1.4"/></svg>
          Sejarah Mushaf
        </span>
        <span class="chip" title="Waktu baca">⏱️ 4 menit</span>
        <span class="chip" title="Status">✨ Edisi ceria</span>
      </div>
    </div>
  </header>

  <div class="container">
    <main>
      <article aria-labelledby="judul">
        <h2 id="judul">Ringkasan cepat</h2>
        <div class="stats" role="list">
          <div class="card" role="listitem"><b>Jumlah lembar</b><div>1087 lembar</div></div>
          <div class="card" role="listitem"><b>Ukuran lembar</b><div>57 × 68 cm</div></div>
          <div class="card" role="listitem"><b>Baris/halaman</b><div>12 baris</div></div>
          <div class="card" role="listitem"><b>Berat</b><div>± 80 kg</div></div>
        </div>

        <div class="hr"></div>

        <h3>Gaya tulisan dan hiasan</h3>
        <p>
          Tulisan mushaf ini menggunakan tinta gelap dengan khat Makki khas abad pertama Hijriyah. Masih polos—tanpa titik dan tanpa hiasan kaligrafi rumit—jadi yang menonjol adalah teksnya. Pemisah antar surah dihiasi ornamen tumbuhan berwarna, memberi napas visual sekaligus penanda yang ramah pembaca.
        </p>

        <h3>Perjalanan kodifikasi</h3>
        <p>
          Pengumpulan Al-Qur’an dalam bentuk kitab dimulai pada masa Abu Bakar ra, menyusul gugurnya banyak huffaz dalam pertempuran. Di periode Utsman bin Affan ra, disiapkan lima mushaf standar: empat dikirim ke Kufah, Bashrah, Makkah, dan Syam; satu tetap di Madinah. Sejak itu, penyalinan merujuk ke mushaf-mushaf tersebut dan menyebar ke seluruh penjuru dunia Islam.
        </p>

        <div class="note">Catatan: Al-Qur’an dijaga, diturunkan, dan diriwayatkan dengan ketat—tradisi hafalan dan penyalinan rapi berjalan beriringan.</div>

        <div class="hr"></div>

        <h2>Galeri foto</h2>
        <p>Nikmati tampilan fullscreen, geser kiri/kanan untuk navigasi. Klik gambar untuk membuka lightbox.</p>

        <section class="gallery" aria-label="Galeri Mushaf Utsman">
          <figure class="thumb">
            <img loading="lazy" width="600" height="415"
                 src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjqO49Ig6_Mw3477c9zsZhx47wpp9KOrNvsYV6hJMdOz5hPfRHVNR5sOpdi0eC5dPMMBOjQ1qKJyyPqCsByu84uHCdpIJ1-o_C8jg7zq3RFD0ZLswFy_yvTuSc2-khJgCYRU3cDsInh2Q3uAa494tcOL3DX63F2PBiW3bKo6WjhyphenhyphenWaUuqaq73fhk1Dt4ik/s1600/Mushaf-Utsman-bin-Affan.jpg"
                 alt="Mushaf Utsman bin Affan - tampilan halaman" data-full="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjqO49Ig6_Mw3477c9zsZhx47wpp9KOrNvsYV6hJMdOz5hPfRHVNR5sOpdi0eC5dPMMBOjQ1qKJyyPqCsByu84uHCdpIJ1-o_C8jg7zq3RFD0ZLswFy_yvTuSc2-khJgCYRU3cDsInh2Q3uAa494tcOL3DX63F2PBiW3bKo6WjhyphenhyphenWaUuqaq73fhk1Dt4ik/s1600/Mushaf-Utsman-bin-Affan.jpg">
          </figure>
          <!-- Tambahkan foto lain di sini jika ada. Cukup duplikasi figure .thumb -->
        </section>

        <div class="share" aria-label="Bagikan artikel ini">
          <a target="_blank" rel="noopener" href="#" id="share-whatsapp" aria-label="WhatsApp">
            <span>🟢</span> WhatsApp
          </a>
          <a target="_blank" rel="noopener" href="#" id="share-telegram" aria-label="Telegram">
            <span>🔷</span> Telegram
          </a>
          <a target="_blank" rel="noopener" href="#" id="share-twitter" aria-label="X">
            <span>🐦</span> X
          </a>
          <a target="_blank" rel="noopener" href="#" id="share-facebook" aria-label="Facebook">
            <span>📘</span> Facebook
          </a>
          <a target="_blank" rel="noopener" href="#" id="share-linkedin" aria-label="LinkedIn">
            <span>💼</span> LinkedIn
          </a>
          <a target="_blank" rel="noopener" href="#" id="share-copy" aria-label="Salin tautan">
            <span>🔗</span> Salin
          </a>
        </div>

        <div class="hr"></div>

        <h2>Ruang diskusi</h2>
        <p>Sampaikan komentar, catatan sejarah tambahan, atau referensi favoritmu di bawah ya!</p>
        <div id="fb-root"></div>
        <div class="fb-comments" data-href="" data-width="100%" data-numposts="5"></div>
        <script async defer crossorigin="anonymous" src="https://connect.facebook.net/id_ID/sdk.js#xfbml=1&version=v18.0"></script>

      </article>

      <aside aria-label="Info interaktif">
        <h3>Info perangkat dan lokasi</h3>
        <div class="info">
          <div class="kvs">
            <div class="row"><span><b>Browser</b></span><span id="kv-browser">Mendeteksi…</span></div>
            <div class="row"><span><b>Sistem operasi</b></span><span id="kv-os">Mendeteksi…</span></div>
            <div class="row"><span><b>Resolusi</b></span><span id="kv-res">Mendeteksi…</span></div>
            <div class="row"><span><b>IP / Kota</b></span><span id="kv-ip">Mendeteksi…</span></div>
            <div class="row"><span><b>Negara</b></span><span id="kv-cc"><span class="flag">🏳️</span> —</span></div>
          </div>

          <div class="hr"></div>

          <h3>Fun facts singkat</h3>
          <ul>
            <li><b>Ukuran raksasa:</b> setinggi kira-kira anak SD kelas awal—benar-benar monumental.</li>
            <li><b>Tanpa titik:</b> menuntut kejelian qira’ah dan tradisi hafalan yang kuat.</li>
            <li><b>Standarisasi:</b> pengiriman mushaf ke pusat-pusat kota kunci menyatukan bacaan.</li>
          </ul>

          <div class="hr"></div>

          <h3>Dokumentasi</h3>
          <p>Kalau kamu punya foto detail atau referensi manuskrip lain, kirimkan—biar kita tambah ke galeri.</p>
        </div>
      </aside>
    </main>
  </div>

  <div class="lightbox" role="dialog" aria-modal="true" aria-label="Penampil gambar">
    <div class="lb-inner">
      <div class="lb-toolbar">
        <div style="display:flex;align-items:center;gap:8px">
          <span id="lb-counter">1 / 1</span>
        </div>
        <button class="lb-close" aria-label="Tutup" title="Tutup">
          ✕
        </button>
      </div>
      <div class="lb-stage">
        <img id="lb-image" alt="Tampilan besar">
        <div class="lb-nav" aria-hidden="true">
          <button class="lb-btn" id="lb-prev" title="Sebelumnya" aria-label="Sebelumnya">⟨</button>
          <button class="lb-btn" id="lb-next" title="Berikutnya" aria-label="Berikutnya">⟩</button>
        </div>
      </div>
      <div class="lb-toolbar" style="justify-content:center">
        <small style="color:#c7d2feaa">Klik di luar gambar untuk menutup</small>
      </div>
    </div>
  </div>

  <footer>
    <div class="container">
      <p>© <span id="year"></span> frijal.github.io — Artikel: Mushaf Utsman bin Affan</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // Helper: safe query
    const $ = (sel, ctx=document) => ctx.querySelector(sel);
    const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    // Year
    $('#year').textContent = new Date().getFullYear();

    // Share links
    const pageUrl = encodeURIComponent(location.href);
    const pageTitle = encodeURIComponent(document.title);
    $('#share-whatsapp').href = `https://wa.me/?text=${pageTitle}%20${pageUrl}`;
    $('#share-telegram').href = `https://t.me/share/url?url=${pageUrl}&text=${pageTitle}`;
    $('#share-twitter').href = `https://twitter.com/intent/tweet?url=${pageUrl}&text=${pageTitle}`;
    $('#share-facebook').href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`;
    $('#share-linkedin').href = `https://www.linkedin.com/sharing/share-offsite/?url=${pageUrl}`;
    $('#share-copy').addEventListener('click', (e)=>{
      e.preventDefault();
      navigator.clipboard?.writeText(location.href).then(()=>{
        alert('Tautan disalin. Silakan tempel di mana pun!');
      });
    });

    // UA parsing (sederhana)
    (function(){
      const ua = navigator.userAgent;
      const plat = navigator.platform || '';
      const kvBrowser = $('#kv-browser');
      const kvOS = $('#kv-os');
      const kvRes = $('#kv-res');

      function detectBrowser(){
        if (/edg/i.test(ua)) return 'Microsoft Edge';
        if (/chrome|crios/i.test(ua)) return 'Chrome';
        if (/firefox|fxios/i.test(ua)) return 'Firefox';
        if (/safari/i.test(ua) && !/chrome|crios|edg/i.test(ua)) return 'Safari';
        if (/opr\//i.test(ua)) return 'Opera';
        return 'Browser tidak dikenal';
      }
      function detectOS(){
        if (/windows nt/i.test(ua)) return 'Windows';
        if (/mac os x/i.test(ua)) return 'macOS';
        if (/android/i.test(ua)) return 'Android';
        if (/iphone|ipad|ipod/i.test(ua)) return 'iOS';
        if (/linux/i.test(ua)) return 'Linux';
        if (plat.includes('Win')) return 'Windows';
        if (plat.includes('Mac')) return 'macOS';
        if (plat.includes('Linux')) return 'Linux';
        return 'OS tidak dikenal';
      }
      kvBrowser.textContent = detectBrowser();
      kvOS.textContent = detectOS();
      kvRes.textContent = `${window.screen.width}×${window.screen.height}`;
      window.addEventListener('resize', ()=> kvRes.textContent = `${window.screen.width}×${window.screen.height}`);
    })();

    // IP + Geo (graceful)
    (function(){
      const ipEl = $('#kv-ip');
      const ccEl = $('#kv-cc');

      function ccToEmoji(cc){
        if (!cc || cc.length !== 2) return '🏳️';
        const codePoints = [...cc.toUpperCase()].map(c => 127397 + c.charCodeAt());
        return String.fromCodePoint(...codePoints);
      }

      // Try ipapi.co first
      fetch('https://ipapi.co/json/')
        .then(r => r.ok ? r.json() : Promise.reject())
        .then(d => {
          const flag = ccToEmoji(d.country);
          ipEl.textContent = `${d.ip || '—'} / ${d.city || '—'}`;
          ccEl.innerHTML = `<span class="flag">${flag}</span> ${d.country_name || d.country || '—'}`;
        })
        .catch(()=>{
          // Fallback: ipinfo.io
          fetch('https://ipinfo.io/json?token=')
            .then(r => r.ok ? r.json() : Promise.reject())
            .then(d=>{
              const cc = (d.country || '').toUpperCase();
              const flag = ccToEmoji(cc);
              ipEl.textContent = `${d.ip || '—'} / ${(d.city || '—')}`;
              ccEl.innerHTML = `<span class="flag">${flag}</span> ${cc || '—'}`;
            })
            .catch(()=>{
              ipEl.textContent = 'Tidak tersedia';
              ccEl.innerHTML = `<span class="flag">🏳️</span> —`;
            });
        });
    })();

    // Lightbox
    (function(){
      const items = $$('.gallery .thumb img').map((img, idx)=>({
        thumb: img.src, full: img.dataset.full || img.src, alt: img.alt || `Gambar ${idx+1}`
      }));
      const lb = $('.lightbox');
      const imgEl = $('#lb-image');
      const counter = $('#lb-counter');
      const btnPrev = $('#lb-prev');
      const btnNext = $('#lb-next');
      const btnClose = $('.lb-close');
      let i = 0;

      function render(){
        if (!items.length) return;
        imgEl.src = items[i].full;
        imgEl.alt = items[i].alt;
        counter.textContent = `${i+1} / ${items.length}`;
        btnPrev.disabled = (items.length<=1);
        btnNext.disabled = (items.length<=1);
      }
      function openAt(idx){ i = idx; render(); lb.classList.add('open'); document.body.style.overflow='hidden' }
      function close(){ lb.classList.remove('open'); document.body.style.overflow='' }
      function prev(){ i = (i - 1 + items.length) % items.length; render() }
      function next(){ i = (i + 1) % items.length; render() }

      $$('.gallery .thumb img').forEach((img, idx)=>{
        img.addEventListener('click', ()=>openAt(idx));
      });
      btnClose.addEventListener('click', close);
      lb.addEventListener('click', (e)=>{ if(e.target === lb) close(); });
      btnPrev.addEventListener('click', prev);
      btnNext.addEventListener('click', next);
      window.addEventListener('keydown', (e)=>{
        if(!lb.classList.contains('open')) return;
        if(e.key === 'Escape') close();
        if(e.key === 'ArrowLeft') prev();
        if(e.key === 'ArrowRight') next();
      });
    })();
  </script>

  <!-- Set FB comments href ke current URL -->
  <script>document.querySelector('.fb-comments').setAttribute('data-href',location.href)</script>

  <!-- Auto-ensure og:image, twitter:image, og:url -->
  <script>
    document.addEventListener("DOMContentLoaded",()=>{
      let s=(document.querySelector("main section img")||{}).src||"";
      ["og:image","twitter:image"].forEach((p,j)=>document.head.appendChild(document.querySelector((j?"meta[name=":"meta[property=")+`"${p}"]`)||Object.assign(document.createElement("meta"),{[j?"name":"property"]:p,content:s})));
      document.head.appendChild(document.querySelector('meta[property="og:url"]')||Object.assign(document.createElement("meta"),{property:"og:url",content:location.href}))
    });
  </script>
<button id="related-posts-toggle">❌</button>
<div id="related-posts-container">
<ul id="related-posts-list"></ul></div>
<script src="/ext/related.js"></script>
</body>
</html>
