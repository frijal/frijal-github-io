<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daftar Isi Interaktif - Pelan Kiri FRijal</title>
<meta name="description" content="Jelajahi beragam topik mulai dari panduan sistem operasi Windows dan Linux, Ubuntu, Debian, Arch, RedHat, Fedora, inspirasi kehidupan dan perjalanan, komunitas, hingga artikel seputar religi dan Islam untuk Muslim, serta tips seputar pekerjaan.">
  <style>
  body { font-family: 'Segoe UI', Arial; margin:0; padding-top:70px; background:#f2f2f2; color:#333; }
  h1 { text-align:center; margin-bottom:20px; font-size:2rem; }

  /* Marquee */
  #marquee-container { width:100%; background:#007BFF; color:white; overflow:hidden; white-space:nowrap; position:fixed; top:0; left:0; z-index:9999; padding:10px 0; font-size:14px; font-weight:bold; }
  #marquee-content { display:inline-block; padding-left:100%; animation:marquee 600s linear infinite; will-change:transform; }
  #marquee-container:hover #marquee-content { animation-play-state:paused; }
  #marquee-content a { color:white; text-decoration:none; margin-right:30px; transition: color 0.3s; }
  #marquee-content a:hover { color:yellow; text-decoration:underline; }
  @keyframes marquee { 0% { transform: translateX(0%); } 100% { transform: translateX(-100%); } }

  #search { width:80%; max-width:400px; padding:10px; font-size:16px; margin:15px auto; display:block; border-radius:6px; border:1px solid #ccc; }

    /* Expand/Collapse Button */
  #tocToggle { display:block; width:200px; margin:10px auto; padding:8px 12px; font-size:14px; font-weight:bold; border:none; border-radius:6px; cursor:pointer; background:#007BFF; color:white; }
  
  /* TOC */
  #toc { max-width:900px; margin:10px auto; }
  #totalCount { text-align:center; margin-top:20px; font-weight:bold; font-size:16px; padding:10px; background:#007BFF; color:white; border-radius:6px; }

  .category { margin:10px 0; border-radius:8px; overflow:hidden; box-shadow:0 2px 5px rgba(0,0,0,0.1); background:white; }
  .category-header { cursor:pointer; padding:10px 16px; font-weight:bold; display:flex; justify-content:space-between; align-items:center; transition:all 0.3s; color:white; }
  .toc-list { display:none; padding:0 16px; }
  .toc-item { display:flex; align-items:center; margin:4px 0; padding:4px 0; border-bottom:1px solid #f0f0f0; }
  .toc-title { flex:1; display:flex; align-items:center; justify-content:flex-start; gap:8px; flex-wrap: wrap; }
  .toc-title a { text-decoration:none; color:#333; transition:all 0.3s; font-weight:bold; position:relative; }
  .toc-title a.visited { color: gray; }
  .toc-title a::after { content:""; position:absolute; left:50%; bottom:-2px; transform:translateX(-50%); width:0; height:2px; background:#fff; transition:width 0.3s ease; }
  .toc-title a:hover::after { width:100%; }
  .label-new { background:#28a745; color:white; padding:2px 5px; border-radius:8px; }
  .label-visited { background:#6c757d; color:white; padding:2px 5px; border-radius:8px; }
  .badge { padding:2px 8px; border-radius:12px; font-size:12px; color:white; margin-left:8px; font-weight:bold; }

  /* Highlight fade-in */
  .highlight { background: yellow; color: black; animation:fadeIn 0.5s ease-in; }
  @keyframes fadeIn { from { background: transparent; } to { background: yellow; } }

  @media(max-width:500px){ #infoBar { flex-direction:column; gap:10px; } }

  /* Badge jumlah artikel di kategori TOC */
.category-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 16px;
  font-weight: bold;
  cursor: pointer;
  color: white;
  border-radius: 6px;
}

.category-header .badge {
  background: #ffc107; /* kuning emas */
  color: #333;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: bold;
}

  
  /* Efek pada judul artikel TOC */
.toc-title a {
  position: relative;
  text-decoration: none;
  color: #333;
  font-weight: bold;
  transition: all 0.3s ease;
}

/* Efek hover: scale, shadow, gradient text */
.toc-title a:hover {
  transform: scale(1.05); /* sedikit membesar */
  color: transparent;
  background: linear-gradient(90deg, #ff7e5f, #feb47b);
  background-clip: text;
  -webkit-background-clip: text; /* untuk browser Webkit */
  text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

/* Efek underline animasi */
.toc-title a::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 0%;
  height: 2px;
  background: #007BFF;
  transition: width 0.3s ease;
  border-radius: 2px;
}

.toc-title a:hover::after {
  width: 100%;
}

/* Efek highlight saat diklik atau visited */
.toc-title a.visited {
  color: gray;
  text-decoration: none;
  opacity: 0.8;
}
/* Gaya dasar untuk footer */
        .page-footer {
            padding: 20px;
            text-align: center;
            font-family: sans-serif;
            font-size: 14px;
        }

        /* Gaya untuk wadah info dinamis */
        #footerInfo {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        /* Gaya untuk setiap item info */
        .info-item {
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, color 0.2s ease-in-out;
            color: #555;
        }

        /* Gaya saat hover */
        .info-item:hover {
            transform: scale(1.05);
            color: #007BFF;
        }
        
        /* Tambahan gaya untuk ikon SVG */
        .info-item svg {
            width: 16px;
            height: 16px;
            vertical-align: middle;
        }
</style>
</head>
<body>
<!-- Marquee -->
<div id="marquee-container"><div id="marquee-content">Memuat judul artikel...</div></div>

<div><footer class="page-footer"><div id="footerInfo"></div></footer></div>
<!-- Search -->
<input type="text" id="search" placeholder="Cari judul...">

<!-- Expand/Collapse TOC -->
<button id="tocToggle">Collapse TOC</button>

<!-- TOC -->
<div id="toc"></div>
<div id="totalCount">Total artikel: 0</div>

<script>
const gradientMap = {
  "ðŸ“½ï¸ Multimedia & Editing": "linear-gradient(90deg, #FF4500, #FF7F50)",   // Coral â†’ OrangeRed
  "ðŸ§ Linux & Open Source": "linear-gradient(90deg, #FFA500, #FFD700)",    // SeaGreen â†’ MediumSeaGreen
  "ðŸ“š Islam & Kehidupan": "linear-gradient(90deg, #2E8B57, #3CB371)", // BlueViolet â†’ MediumPurple
  "ðŸžï¸ Budaya, Kuliner & Lifestyle": "linear-gradient(90deg, #8A2BE2, #9370DB)", // Gold â†’ Orange
  "ðŸ“° Catatan & Sosial": "linear-gradient(90deg, #1E90FF, #4682B4)",       // DodgerBlue â†’ SteelBlue
  "ðŸ’» Windows & Teknologi Umum": "linear-gradient(90deg, #2F4F4F, #708090)", // SlateGray â†’ DarkSlateGray
  "ðŸ—‚ï¸ Lainnya": "linear-gradient(90deg, #696969, #A9A9A9)"                 // DarkGray â†’ DimGray
};
/////////
  function getGradient(category) {
  if (!category) return "linear-gradient(90deg, #ccc, #eee)"; // fallback default

  // Normalisasi string (NFC) + trim spasi
  const normalized = category.normalize("NFC").trim();

  return gradientMap[normalized] || "linear-gradient(90deg, #ccc, #eee)";
}
/////////
const visitedLinks = JSON.parse(localStorage.getItem("visitedLinks")||"[]");

async function loadTOC() {
  try {
    const res = await fetch("artikel.json");
    const data = await res.json();
    const toc = document.getElementById("toc");
    toc.innerHTML = "";

    const totalCount = document.getElementById("totalCount");

    // --- Kelompokkan data per kategori ---
    const grouped = {};
    Object.keys(data).forEach(cat => {
      grouped[cat] = data[cat].map(arr => ({
        title: arr[0],
        file: arr[1],
        category: cat
      }));
    });

    // --- Hitung total artikel ---
    const totalArticles = Object.values(grouped).reduce((sum, arr) => sum + arr.length, 0);
    totalCount.textContent = `Total artikel: ${totalArticles}`;

    // --- Urutkan kategori berdasarkan jumlah artikel terbanyak ---
    Object.keys(grouped)
      .sort((a, b) => grouped[b].length - grouped[a].length)
      .forEach(cat => {
        const catDiv = document.createElement("div");
        catDiv.className = "category";

        catDiv.innerHTML = `
          <div class="category-header">
            ${cat} <span class="badge">${grouped[cat].length}</span>
          </div>
          <div class="toc-list"></div>
        `;

        const catList = catDiv.querySelector(".toc-list");

        // --- Terapkan gradient dari gradientMap ---
        catDiv.querySelector(".category-header").style.background = gradientMap[cat] || gradientMap["Lainnya"];

        // --- Tambahkan item TOC ---
        grouped[cat].forEach((item, i) => {
          const el = document.createElement("div");
          el.className = "toc-item";
          el.dataset.text = item.title.toLowerCase();

          const a = document.createElement("a");
          a.href = `artikel/${item.file}`;
          a.target="_blank";
          a.textContent = `${i + 1}. ${item.title}`;

          const statusSpan = document.createElement("span");
          if (visitedLinks.includes(item.file)) {
            statusSpan.className = "label-visited";
            statusSpan.textContent = "sudah dibaca ðŸ‘";
            a.classList.add("visited");
          } else {
            statusSpan.className = "label-new";
            statusSpan.textContent = "ðŸ“š belum dibaca";
          }

          a.addEventListener("click", () => {
            if (!visitedLinks.includes(item.file)) {
              visitedLinks.push(item.file);
              localStorage.setItem("visitedLinks", JSON.stringify(visitedLinks));
              statusSpan.className = "label-visited";
              statusSpan.textContent = "sudah dibaca ðŸ‘";
              a.classList.add("visited");
            }
          });

          const titleDiv = document.createElement("div");
          titleDiv.className = "toc-title";
          titleDiv.appendChild(a);
          titleDiv.appendChild(statusSpan);
          el.appendChild(titleDiv);
          catList.appendChild(el);
        });

        // --- Toggle kategori individu ---
        catDiv.querySelector(".category-header").addEventListener("click", () => {
          catList.style.display = catList.style.display === "block" ? "none" : "block";
          updateTOCToggleText();
        });

        toc.appendChild(catDiv);
      });

    // --- Marquee ---
const m = document.getElementById("marquee-content");
const allArticles = Object.values(grouped).flat();

// fungsi shuffle (Fisher-Yates)
function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

const shuffled = shuffle(allArticles);

m.innerHTML = shuffled
  .map(d => `<a href="artikel/${d.file}" target="_blank">${d.title}</a>`)
  .join(" â€¢ ");

    // --- Search ---
    document.getElementById("search").addEventListener("input", function () {
      const term = this.value.toLowerCase();
      let countVisible = 0;

      document.querySelectorAll(".category").forEach(category => {
        let catVisible = false;
        category.querySelectorAll(".toc-item").forEach(item => {
          const text = item.dataset.text;
          const link = item.querySelector("a");
          if (term && text.includes(term)) {
            item.style.display = "flex";
            catVisible = true;
            countVisible++;
            const regex = new RegExp(`(${term})`, "gi");
            link.innerHTML = link.textContent.replace(regex, '<span class="highlight">$1</span>');
          } else {
            item.style.display = term ? "none" : "flex";
            link.innerHTML = link.textContent;
            if (!term) countVisible++;
          }
        });
        category.style.display = catVisible ? "block" : (term ? "none" : "block");
        const tocList = category.querySelector(".toc-list");
        tocList.style.display = catVisible ? "block" : tocList.style.display;
      });

      totalCount.textContent = `Total artikel: ${countVisible}`;
      updateTOCToggleText();
    });

    // --- Tombol global Buka/Tutup ---
    let tocCollapsed = false;
    const tocToggleBtn = document.getElementById("tocToggle");

    function updateTOCToggleText() {
      const allCollapsed = Array.from(document.querySelectorAll(".toc-list"))
        .every(list => list.style.display === "none");
      tocCollapsed = allCollapsed;
      tocToggleBtn.textContent = tocCollapsed ? "Buka" : "Tutup";
    }

    tocToggleBtn.addEventListener("click", () => {
      tocCollapsed = !tocCollapsed;
      document.querySelectorAll(".toc-list").forEach(list => {
        list.style.display = tocCollapsed ? "none" : "block";
      });
      tocToggleBtn.textContent = tocCollapsed ? "Buka" : "Tutup";
    });

    // --- Inisialisasi tombol ---
    updateTOCToggleText();

  } catch (e) {
    console.error("Gagal load artikel.json:", e);
  }
}

  
loadTOC();
</script>
<script>
        // --- Ikon SVG Inline ---
        const browserIcons = {
          "Firefox": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#FF7139" d="M12.9 6.2c0-1.8-1-3.2-2.5-4.2C9.4 1.2 8.3.9 7.2 1.3c-1.1.4-2 .8-2.9 1.4-.8.6-1.6 1.3-2.2 2-.5.8-.8 1.6-.8 2.5 0 2 1.2 3.5 3 4.6 1.8 1.1 4 1.7 6.4 1.7.3-.2.6-.5.9-.9.4-.4.8-1 1-1.7.3-.8.4-1.6.4-2.5 0-.4-.1-.8-.2-1.2z"/></svg>',
          "Chrome": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="#EA4335"/><circle cx="8" cy="8" r="5.5" fill="#FBBC05"/><circle cx="8" cy="8" r="4" fill="#4285F4"/></svg>',
          "Edge": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="#0078D7"/></svg>',
          "Safari": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="#00ADEF"/><path fill="#fff" d="M8 4l1 4-4-1z"/></svg>',
          "Unknown": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="#999"/><text x="8" y="11" font-size="8" text-anchor="middle" fill="#fff">?</text></svg>'
        };

        // --- Ikon SVG Inline untuk OS ---
        const osIcons = {
          "Windows": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#00A4EF" d="M8.5 2.1L2.4 3.1 2 7.7l6.5-.8zM2.4 8l-.4 4.6 6.5-.8-.1-4.7zM9.1 7.1v6.8L14 13.1V8zM9.1 2.3v4.7L14 7V3.1z"/></svg>',
          "macOS": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="#000"/></svg>',
          "Linux": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="#000"/><circle cx="6" cy="6" r="1" fill="#fff"/><circle cx="10" cy="6" r="1" fill="#fff"/></svg>',
          "Unknown": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="#999"/><text x="8" y="11" font-size="8" text-anchor="middle" fill="#fff">?</text></svg>'
        };

        // --- Ikon Globe SVG Inline untuk IP ---
        const globeIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="#4CAF50"/><path fill="#fff" d="M8 3a5 5 0 010 10 5 5 0 010-10z"/></svg>';

        // --- Fungsi deteksi Browser ---
        function getBrowserInfo(){
            const ua = navigator.userAgent;
            let name="Unknown", version="N/A";
            if(ua.includes("Firefox")) { name="Firefox"; version=ua.match(/Firefox\/([0-9\.]+)/)[1]; }
            else if(ua.includes("Chrome") && !ua.includes("Edg")) { name="Chrome"; version=ua.match(/Chrome\/([0-9\.]+)/)[1]; }
            else if(ua.includes("Edg")) { name="Edge"; version=ua.match(/Edg\/([0-9\.]+)/)[1]; }
            else if(ua.includes("Safari")) { name="Safari"; version=ua.match(/Version\/([0-9\.]+)/)[1]; }
            return {name, version, icon: browserIcons[name] || browserIcons["Unknown"]};
        }

        // --- Fungsi deteksi OS ---
        function getOSInfo(){
            const platform = navigator.platform.toLowerCase();
            let name="Unknown";
            if(platform.includes("win")) name="Windows";
            else if(platform.includes("mac")) name="macOS";
            else if(platform.includes("linux")) name="Linux";
            return {name, icon: osIcons[name] || osIcons["Unknown"]};
        }

        // --- Ambil IP dan info lokasi + bendera ---
        fetch('https://ipapi.co/json/').then(res => res.json()).then(data => {
            const footer = document.getElementById('footerInfo');
            const browser = getBrowserInfo();
            const os = getOSInfo();
            const countryCode = data.country_code.toUpperCase();
            
            // Konversi kode negara (mis. 'ID') menjadi emoji bendera ('ðŸ‡®ðŸ‡©')
            const flagEmoji = countryCode.split('').map(char => String.fromCodePoint(char.charCodeAt(0) + 127397)).join('');
            
            // Tampilkan semua info
            if (footer) {
                footer.innerHTML = `
                    <div class="info-item">
                        <span style="width:16px;height:16px;display:inline-block;">${browser.icon}</span> <span>${browser.name} ${browser.version}</span>
                    </div>
                    <div class="info-item">
                        <span style="width:16px;height:16px;display:inline-block;">${os.icon}</span> <span>${os.name}</span>
                    </div>
                    <div class="info-item">
                        <span style="width:16px;height:16px;display:inline-block;">${globeIcon}</span> <span>${data.ip} (${data.city}, ${data.region}, ${data.country_name})</span> ${flagEmoji}
                    </div>
                `;
            }
            // Animasi hover
            document.querySelectorAll('.info-item').forEach(el=>{
                el.addEventListener('mouseenter', ()=>{ el.style.transform='scale(1.05)'; el.style.color='#007BFF'; });
                el.addEventListener('mouseleave', ()=>{ el.style.transform='scale(1)'; el.style.color='inherit'; });
            });
        }).catch(err => {
            const footer = document.getElementById('footerInfo');
            if (footer) {
                footer.textContent = 'Gagal memuat info IP. Silakan coba lagi nanti.';
            }
            console.error('Terjadi kesalahan saat mengambil data IP:', err);
        });
    </script>
 
</body>
</html>
