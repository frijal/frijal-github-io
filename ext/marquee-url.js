export async function initMarqueeDynamic(m="marquee-bottom",s=.2,r=6e4){const e=document.getElementById(m),t=document.getElementById("marquee-inner");let n=0,a=0,c,d=s;async function i(){try{const m=await fetch("/artikel.json"),s=await m.json(),e=location.pathname.split("/").pop();let t=null;for(const n in s)if(s[n].some(m=>m[1]===e)){t=n;break}return t?s[t].map(m=>({title:m[0],file:m[1]})).sort(()=>Math.random()-.5):[]}catch(m){return console.error("Load JSON gagal:",m),t.textContent="Gagal memuat artikel.",[]}}function o(m){const s=m.map(m=>`<a href="artikel/${m.file}" target="_blank">${m.title}</a>`).join(" • ");t.innerHTML=s+" • "+s,a=t.scrollWidth/2,n=0,t.style.transform=`translateX(${n}px)`}async function l(){const m=await i();m.length>0&&o(m)}function u(){n-=d,n<=-a&&(n=0),t.style.transform=`translateX(${n}px)`,c=requestAnimationFrame(u)}e.addEventListener("mouseenter",()=>cancelAnimationFrame(c)),e.addEventListener("mouseleave",()=>c=requestAnimationFrame(u)),document.getElementById("slower").onclick=()=>d=Math.max(.01,d-.05),document.getElementById("faster").onclick=()=>d=Math.min(2,d+.05),document.getElementById("speedRange").oninput=m=>d=parseFloat(m.target.value),await l(),c=requestAnimationFrame(u),setInterval(l,r)};document.addEventListener("DOMContentLoaded",()=>initMarqueeDynamic());
